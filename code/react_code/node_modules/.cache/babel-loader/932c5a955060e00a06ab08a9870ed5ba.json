{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Simple view coordinate system\n * Mapping given x, y to transformd view x, y\n */\n\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as vector from 'zrender/lib/core/vector';\nimport * as matrix from 'zrender/lib/core/matrix';\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport Transformable from 'zrender/lib/core/Transformable';\nvar v2ApplyTransform = vector.applyTransform;\n\nvar View =\n/** @class */\nfunction (_super) {\n  __extends(View, _super);\n\n  function View(name) {\n    var _this = _super.call(this) || this;\n\n    _this.type = 'view';\n    _this.dimensions = ['x', 'y'];\n    _this._roamTransformable = new Transformable();\n    _this._rawTransformable = new Transformable();\n    _this.name = name;\n    return _this;\n  } // PENDING to getRect\n\n\n  View.prototype.setBoundingRect = function (x, y, width, height) {\n    this._rect = new BoundingRect(x, y, width, height);\n    return this._rect;\n  };\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n  // PENDING to getRect\n\n\n  View.prototype.getBoundingRect = function () {\n    return this._rect;\n  };\n\n  View.prototype.setViewRect = function (x, y, width, height) {\n    this.transformTo(x, y, width, height);\n    this._viewRect = new BoundingRect(x, y, width, height);\n  };\n  /**\n   * Transformed to particular position and size\n   */\n\n\n  View.prototype.transformTo = function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var rawTransform = this._rawTransformable;\n    rawTransform.transform = rect.calculateTransform(new BoundingRect(x, y, width, height));\n    rawTransform.decomposeTransform();\n\n    this._updateTransform();\n  };\n  /**\n   * Set center of view\n   */\n\n\n  View.prototype.setCenter = function (centerCoord) {\n    if (!centerCoord) {\n      return;\n    }\n\n    this._center = centerCoord;\n\n    this._updateCenterAndZoom();\n  };\n\n  View.prototype.setZoom = function (zoom) {\n    zoom = zoom || 1;\n    var zoomLimit = this.zoomLimit;\n\n    if (zoomLimit) {\n      if (zoomLimit.max != null) {\n        zoom = Math.min(zoomLimit.max, zoom);\n      }\n\n      if (zoomLimit.min != null) {\n        zoom = Math.max(zoomLimit.min, zoom);\n      }\n    }\n\n    this._zoom = zoom;\n\n    this._updateCenterAndZoom();\n  };\n  /**\n   * Get default center without roam\n   */\n\n\n  View.prototype.getDefaultCenter = function () {\n    // Rect before any transform\n    var rawRect = this.getBoundingRect();\n    var cx = rawRect.x + rawRect.width / 2;\n    var cy = rawRect.y + rawRect.height / 2;\n    return [cx, cy];\n  };\n\n  View.prototype.getCenter = function () {\n    return this._center || this.getDefaultCenter();\n  };\n\n  View.prototype.getZoom = function () {\n    return this._zoom || 1;\n  };\n\n  View.prototype.getRoamTransform = function () {\n    return this._roamTransformable.getLocalTransform();\n  };\n  /**\n   * Remove roam\n   */\n\n\n  View.prototype._updateCenterAndZoom = function () {\n    // Must update after view transform updated\n    var rawTransformMatrix = this._rawTransformable.getLocalTransform();\n\n    var roamTransform = this._roamTransformable;\n    var defaultCenter = this.getDefaultCenter();\n    var center = this.getCenter();\n    var zoom = this.getZoom();\n    center = vector.applyTransform([], center, rawTransformMatrix);\n    defaultCenter = vector.applyTransform([], defaultCenter, rawTransformMatrix);\n    roamTransform.originX = center[0];\n    roamTransform.originY = center[1];\n    roamTransform.x = defaultCenter[0] - center[0];\n    roamTransform.y = defaultCenter[1] - center[1];\n    roamTransform.scaleX = roamTransform.scaleY = zoom;\n\n    this._updateTransform();\n  };\n  /**\n   * Update transform from roam and mapLocation\n   */\n\n\n  View.prototype._updateTransform = function () {\n    var roamTransformable = this._roamTransformable;\n    var rawTransformable = this._rawTransformable;\n    rawTransformable.parent = roamTransformable;\n    roamTransformable.updateTransform();\n    rawTransformable.updateTransform();\n    matrix.copy(this.transform || (this.transform = []), rawTransformable.transform || matrix.create());\n    this._rawTransform = rawTransformable.getLocalTransform();\n    this.invTransform = this.invTransform || [];\n    matrix.invert(this.invTransform, this.transform);\n    this.decomposeTransform();\n  };\n\n  View.prototype.getTransformInfo = function () {\n    var roamTransform = this._roamTransformable.transform;\n    var rawTransformable = this._rawTransformable;\n    return {\n      roamTransform: roamTransform ? zrUtil.slice(roamTransform) : matrix.create(),\n      rawScaleX: rawTransformable.scaleX,\n      rawScaleY: rawTransformable.scaleY,\n      rawX: rawTransformable.x,\n      rawY: rawTransformable.y\n    };\n  };\n\n  View.prototype.getViewRect = function () {\n    return this._viewRect;\n  };\n  /**\n   * Get view rect after roam transform\n   */\n\n\n  View.prototype.getViewRectAfterRoam = function () {\n    var rect = this.getBoundingRect().clone();\n    rect.applyTransform(this.transform);\n    return rect;\n  };\n  /**\n   * Convert a single (lon, lat) data item to (x, y) point.\n   */\n\n\n  View.prototype.dataToPoint = function (data, noRoam, out) {\n    var transform = noRoam ? this._rawTransform : this.transform;\n    out = out || [];\n    return transform ? v2ApplyTransform(out, data, transform) : vector.copy(out, data);\n  };\n  /**\n   * Convert a (x, y) point to (lon, lat) data\n   */\n\n\n  View.prototype.pointToData = function (point) {\n    var invTransform = this.invTransform;\n    return invTransform ? v2ApplyTransform([], point, invTransform) : [point[0], point[1]];\n  };\n\n  View.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.dataToPoint(value) : null;\n  };\n\n  View.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.pointToData(pixel) : null;\n  };\n  /**\n   * @implements\n   */\n\n\n  View.prototype.containPoint = function (point) {\n    return this.getViewRectAfterRoam().contain(point[0], point[1]);\n  };\n\n  View.dimensions = ['x', 'y'];\n  return View;\n}(Transformable);\n\nfunction getCoordSys(finder) {\n  var seriesModel = finder.seriesModel;\n  return seriesModel ? seriesModel.coordinateSystem : null; // e.g., graph.\n}\n\nexport default View;","map":{"version":3,"sources":["/home/kzj/project/finalize/B-S-/源码/前端/node_modules/echarts/lib/coord/View.js"],"names":["__extends","zrUtil","vector","matrix","BoundingRect","Transformable","v2ApplyTransform","applyTransform","View","_super","name","_this","call","type","dimensions","_roamTransformable","_rawTransformable","prototype","setBoundingRect","x","y","width","height","_rect","getBoundingRect","setViewRect","transformTo","_viewRect","rect","rawTransform","transform","calculateTransform","decomposeTransform","_updateTransform","setCenter","centerCoord","_center","_updateCenterAndZoom","setZoom","zoom","zoomLimit","max","Math","min","_zoom","getDefaultCenter","rawRect","cx","cy","getCenter","getZoom","getRoamTransform","getLocalTransform","rawTransformMatrix","roamTransform","defaultCenter","center","originX","originY","scaleX","scaleY","roamTransformable","rawTransformable","parent","updateTransform","copy","create","_rawTransform","invTransform","invert","getTransformInfo","slice","rawScaleX","rawScaleY","rawX","rawY","getViewRect","getViewRectAfterRoam","clone","dataToPoint","data","noRoam","out","pointToData","point","convertToPixel","ecModel","finder","value","coordSys","getCoordSys","convertFromPixel","pixel","containPoint","contain","seriesModel","coordinateSystem"],"mappings":"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","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Simple view coordinate system\n * Mapping given x, y to transformd view x, y\n */\n\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as vector from 'zrender/lib/core/vector';\nimport * as matrix from 'zrender/lib/core/matrix';\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport Transformable from 'zrender/lib/core/Transformable';\nvar v2ApplyTransform = vector.applyTransform;\n\nvar View =\n/** @class */\nfunction (_super) {\n  __extends(View, _super);\n\n  function View(name) {\n    var _this = _super.call(this) || this;\n\n    _this.type = 'view';\n    _this.dimensions = ['x', 'y'];\n    _this._roamTransformable = new Transformable();\n    _this._rawTransformable = new Transformable();\n    _this.name = name;\n    return _this;\n  } // PENDING to getRect\n\n\n  View.prototype.setBoundingRect = function (x, y, width, height) {\n    this._rect = new BoundingRect(x, y, width, height);\n    return this._rect;\n  };\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n  // PENDING to getRect\n\n\n  View.prototype.getBoundingRect = function () {\n    return this._rect;\n  };\n\n  View.prototype.setViewRect = function (x, y, width, height) {\n    this.transformTo(x, y, width, height);\n    this._viewRect = new BoundingRect(x, y, width, height);\n  };\n  /**\n   * Transformed to particular position and size\n   */\n\n\n  View.prototype.transformTo = function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var rawTransform = this._rawTransformable;\n    rawTransform.transform = rect.calculateTransform(new BoundingRect(x, y, width, height));\n    rawTransform.decomposeTransform();\n\n    this._updateTransform();\n  };\n  /**\n   * Set center of view\n   */\n\n\n  View.prototype.setCenter = function (centerCoord) {\n    if (!centerCoord) {\n      return;\n    }\n\n    this._center = centerCoord;\n\n    this._updateCenterAndZoom();\n  };\n\n  View.prototype.setZoom = function (zoom) {\n    zoom = zoom || 1;\n    var zoomLimit = this.zoomLimit;\n\n    if (zoomLimit) {\n      if (zoomLimit.max != null) {\n        zoom = Math.min(zoomLimit.max, zoom);\n      }\n\n      if (zoomLimit.min != null) {\n        zoom = Math.max(zoomLimit.min, zoom);\n      }\n    }\n\n    this._zoom = zoom;\n\n    this._updateCenterAndZoom();\n  };\n  /**\n   * Get default center without roam\n   */\n\n\n  View.prototype.getDefaultCenter = function () {\n    // Rect before any transform\n    var rawRect = this.getBoundingRect();\n    var cx = rawRect.x + rawRect.width / 2;\n    var cy = rawRect.y + rawRect.height / 2;\n    return [cx, cy];\n  };\n\n  View.prototype.getCenter = function () {\n    return this._center || this.getDefaultCenter();\n  };\n\n  View.prototype.getZoom = function () {\n    return this._zoom || 1;\n  };\n\n  View.prototype.getRoamTransform = function () {\n    return this._roamTransformable.getLocalTransform();\n  };\n  /**\n   * Remove roam\n   */\n\n\n  View.prototype._updateCenterAndZoom = function () {\n    // Must update after view transform updated\n    var rawTransformMatrix = this._rawTransformable.getLocalTransform();\n\n    var roamTransform = this._roamTransformable;\n    var defaultCenter = this.getDefaultCenter();\n    var center = this.getCenter();\n    var zoom = this.getZoom();\n    center = vector.applyTransform([], center, rawTransformMatrix);\n    defaultCenter = vector.applyTransform([], defaultCenter, rawTransformMatrix);\n    roamTransform.originX = center[0];\n    roamTransform.originY = center[1];\n    roamTransform.x = defaultCenter[0] - center[0];\n    roamTransform.y = defaultCenter[1] - center[1];\n    roamTransform.scaleX = roamTransform.scaleY = zoom;\n\n    this._updateTransform();\n  };\n  /**\n   * Update transform from roam and mapLocation\n   */\n\n\n  View.prototype._updateTransform = function () {\n    var roamTransformable = this._roamTransformable;\n    var rawTransformable = this._rawTransformable;\n    rawTransformable.parent = roamTransformable;\n    roamTransformable.updateTransform();\n    rawTransformable.updateTransform();\n    matrix.copy(this.transform || (this.transform = []), rawTransformable.transform || matrix.create());\n    this._rawTransform = rawTransformable.getLocalTransform();\n    this.invTransform = this.invTransform || [];\n    matrix.invert(this.invTransform, this.transform);\n    this.decomposeTransform();\n  };\n\n  View.prototype.getTransformInfo = function () {\n    var roamTransform = this._roamTransformable.transform;\n    var rawTransformable = this._rawTransformable;\n    return {\n      roamTransform: roamTransform ? zrUtil.slice(roamTransform) : matrix.create(),\n      rawScaleX: rawTransformable.scaleX,\n      rawScaleY: rawTransformable.scaleY,\n      rawX: rawTransformable.x,\n      rawY: rawTransformable.y\n    };\n  };\n\n  View.prototype.getViewRect = function () {\n    return this._viewRect;\n  };\n  /**\n   * Get view rect after roam transform\n   */\n\n\n  View.prototype.getViewRectAfterRoam = function () {\n    var rect = this.getBoundingRect().clone();\n    rect.applyTransform(this.transform);\n    return rect;\n  };\n  /**\n   * Convert a single (lon, lat) data item to (x, y) point.\n   */\n\n\n  View.prototype.dataToPoint = function (data, noRoam, out) {\n    var transform = noRoam ? this._rawTransform : this.transform;\n    out = out || [];\n    return transform ? v2ApplyTransform(out, data, transform) : vector.copy(out, data);\n  };\n  /**\n   * Convert a (x, y) point to (lon, lat) data\n   */\n\n\n  View.prototype.pointToData = function (point) {\n    var invTransform = this.invTransform;\n    return invTransform ? v2ApplyTransform([], point, invTransform) : [point[0], point[1]];\n  };\n\n  View.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.dataToPoint(value) : null;\n  };\n\n  View.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.pointToData(pixel) : null;\n  };\n  /**\n   * @implements\n   */\n\n\n  View.prototype.containPoint = function (point) {\n    return this.getViewRectAfterRoam().contain(point[0], point[1]);\n  };\n\n  View.dimensions = ['x', 'y'];\n  return View;\n}(Transformable);\n\nfunction getCoordSys(finder) {\n  var seriesModel = finder.seriesModel;\n  return seriesModel ? seriesModel.coordinateSystem : null; // e.g., graph.\n}\n\nexport default View;"]},"metadata":{},"sourceType":"module"}