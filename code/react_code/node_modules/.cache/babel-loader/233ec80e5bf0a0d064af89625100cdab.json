{"ast":null,"code":"// Copyright 2014 Andrei Karpushonak\n'use strict';\n\nvar ECMA_SIZES = require('./byte_size');\n\nvar Buffer = require('buffer').Buffer;\n\nfunction allProperties(obj) {\n  const stringProperties = [];\n\n  for (var prop in obj) {\n    stringProperties.push(prop);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    var symbolProperties = Object.getOwnPropertySymbols(obj);\n    Array.prototype.push.apply(stringProperties, symbolProperties);\n  }\n\n  return stringProperties;\n}\n\nfunction sizeOfObject(seen, object) {\n  if (object == null) {\n    return 0;\n  }\n\n  var bytes = 0;\n  var properties = allProperties(object);\n\n  for (var i = 0; i < properties.length; i++) {\n    var key = properties[i]; // Do not recalculate circular references\n\n    if (typeof object[key] === 'object' && object[key] !== null) {\n      if (seen.has(object[key])) {\n        continue;\n      }\n\n      seen.add(object[key]);\n    }\n\n    bytes += getCalculator(seen)(key);\n\n    try {\n      bytes += getCalculator(seen)(object[key]);\n    } catch (ex) {\n      if (ex instanceof RangeError) {\n        // circular reference detected, final result might be incorrect\n        // let's be nice and not throw an exception\n        bytes = 0;\n      }\n    }\n  }\n\n  return bytes;\n}\n\nfunction getCalculator(seen) {\n  return function calculator(object) {\n    if (Buffer.isBuffer(object)) {\n      return object.length;\n    }\n\n    var objectType = typeof object;\n\n    switch (objectType) {\n      case 'string':\n        return object.length * ECMA_SIZES.STRING;\n\n      case 'boolean':\n        return ECMA_SIZES.BOOLEAN;\n\n      case 'number':\n        return ECMA_SIZES.NUMBER;\n\n      case 'symbol':\n        const isGlobalSymbol = Symbol.keyFor && Symbol.keyFor(object);\n        return isGlobalSymbol ? Symbol.keyFor(object).length * ECMA_SIZES.STRING : (object.toString().length - 8) * ECMA_SIZES.STRING;\n\n      case 'object':\n        if (Array.isArray(object)) {\n          return object.map(getCalculator(seen)).reduce(function (acc, curr) {\n            return acc + curr;\n          }, 0);\n        } else {\n          return sizeOfObject(seen, object);\n        }\n\n      default:\n        return 0;\n    }\n  };\n}\n/**\n * Main module's entry point\n * Calculates Bytes for the provided parameter\n * @param object - handles object/string/boolean/buffer\n * @returns {*}\n */\n\n\nfunction sizeof(object) {\n  return getCalculator(new WeakSet())(object);\n}\n\nmodule.exports = sizeof;","map":{"version":3,"sources":["/home/kzj/project/finalize/B-S-/源码/react_code/node_modules/object-sizeof/index.js"],"names":["ECMA_SIZES","require","Buffer","allProperties","obj","stringProperties","prop","push","Object","getOwnPropertySymbols","symbolProperties","Array","prototype","apply","sizeOfObject","seen","object","bytes","properties","i","length","key","has","add","getCalculator","ex","RangeError","calculator","isBuffer","objectType","STRING","BOOLEAN","NUMBER","isGlobalSymbol","Symbol","keyFor","toString","isArray","map","reduce","acc","curr","sizeof","WeakSet","module","exports"],"mappings":"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","sourcesContent":["// Copyright 2014 Andrei Karpushonak\n\n'use strict'\n\nvar ECMA_SIZES = require('./byte_size')\nvar Buffer = require('buffer').Buffer\n\nfunction allProperties(obj) {\n  const stringProperties = []\n  for (var prop in obj) { \n      stringProperties.push(prop)\n  }\n  if (Object.getOwnPropertySymbols) {\n      var symbolProperties = Object.getOwnPropertySymbols(obj)\n      Array.prototype.push.apply(stringProperties, symbolProperties)\n  }\n  return stringProperties\n}\n\nfunction sizeOfObject (seen, object) {\n  if (object == null) {\n    return 0\n  }\n\n  var bytes = 0\n  var properties = allProperties(object)\n  for (var i = 0; i < properties.length; i++) {\n    var key = properties[i]\n    // Do not recalculate circular references\n    if (typeof object[key] === 'object' && object[key] !== null) {\n      if (seen.has(object[key])) {\n        continue\n      }\n      seen.add(object[key])\n    }\n\n    bytes += getCalculator(seen)(key)\n    try {\n      bytes += getCalculator(seen)(object[key])\n    } catch (ex) {\n      if (ex instanceof RangeError) {\n        // circular reference detected, final result might be incorrect\n        // let's be nice and not throw an exception\n        bytes = 0\n      }\n    }\n  }\n\n  return bytes\n}\n\nfunction getCalculator (seen) {\n  return function calculator(object) {\n    if (Buffer.isBuffer(object)) {\n      return object.length\n    }\n\n    var objectType = typeof (object)\n    switch (objectType) {\n      case 'string':\n        return object.length * ECMA_SIZES.STRING\n      case 'boolean':\n        return ECMA_SIZES.BOOLEAN\n      case 'number':\n        return ECMA_SIZES.NUMBER\n      case 'symbol':\n        const isGlobalSymbol = Symbol.keyFor && Symbol.keyFor(object)\n        return isGlobalSymbol ? Symbol.keyFor(object).length * ECMA_SIZES.STRING : (object.toString().length - 8) * ECMA_SIZES.STRING \n      case 'object':\n        if (Array.isArray(object)) {\n          return object.map(getCalculator(seen)).reduce(function (acc, curr) {\n            return acc + curr\n          }, 0)\n        } else {\n          return sizeOfObject(seen, object)\n        }\n      default:\n        return 0\n    }\n  }\n}\n\n/**\n * Main module's entry point\n * Calculates Bytes for the provided parameter\n * @param object - handles object/string/boolean/buffer\n * @returns {*}\n */\nfunction sizeof (object) {\n  return getCalculator(new WeakSet())(object)\n}\n\nmodule.exports = sizeof\n"]},"metadata":{},"sourceType":"script"}