{"ast":null,"code":"import \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/checkbox/style\";\nimport _Checkbox from \"antd/es/checkbox\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\nvar _jsxFileName = \"/home/kzj/project/finalize/B-S-/\\u6E90\\u7801/react_code/src/pages/Login/index.jsx\";\nimport React, { Component } from 'react';\nimport axios from \"axios\";\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\nimport cookie from 'react-cookies';\nimport './index.css';\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: '',\n      password: ''\n    };\n\n    this.handleUsername = e => {\n      this.setState({\n        username: e.target.value\n      });\n    };\n\n    this.handlePassword = e => {\n      this.setState({\n        password: e.target.value\n      });\n    };\n\n    this.handleSubmit = () => {\n      let that = this;\n      if (that.state.username === '' && that.state.password === '') return;\n      axios.post('/login', {\n        username: this.state.username,\n        password: this.state.password\n      }).then(function (response) {\n        const data = response.data;\n        const result = data.status;\n\n        if (result === 'success') {\n          cookie.save('username', that.state.username, {\n            path: '/'\n          });\n          cookie.save('loginSuccess', true, {\n            path: '/'\n          });\n          cookie.save('email', data.email, {\n            path: '/'\n          });\n          window.location.href = '/index';\n        } else {\n          _message.warning('账号或密码错误', 2);\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    this.goRegister = () => {\n      window.location.href = '/register';\n    };\n  }\n\n  //防止修改url访问\n  componentWillMount() {\n    const username = cookie.load('username');\n    const change = cookie.load('changeSuccess');\n    if (username !== undefined) window.location.href = '/index';\n\n    if (change !== undefined) {\n      _message.success(\"密码修改成功，请重新登录\", 2);\n\n      cookie.remove('changeSuccess', {\n        path: '/'\n      });\n    }\n  }\n\n  componentDidMount() {\n    if (cookie.load('registerSuccess') !== undefined) {\n      _message.success('注册成功，请登陆', 2);\n\n      cookie.remove('registerSuccess', {\n        path: '/'\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"myForm\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: './images/loginPicture.jpg',\n        alt: 'loginPicture',\n        className: \"leftPicture\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"right\",\n        children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n          className: \"title\",\n          children: \"\\u7528\\u6237\\u767B\\u5F55\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n          className: \"line\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(_Form, {\n          name: \"normal_login\",\n          className: \"trueForm\",\n          initialValues: {\n            remember: true\n          },\n          children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n            name: \"username\",\n            rules: [{\n              required: true,\n              message: '请输入您的用户名',\n              trigger: 'blur'\n            }, {\n              min: 6,\n              max: 18,\n              message: '用户名长度应为6-18个字符',\n              trigger: 'blur'\n            }],\n            children: /*#__PURE__*/_jsxDEV(_Input, {\n              prefix: /*#__PURE__*/_jsxDEV(UserOutlined, {\n                className: \"site-form-item-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 44\n              }, this),\n              placeholder: \"\\u7528\\u6237\\u540D\",\n              onChange: this.handleUsername\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n            name: \"password\",\n            rules: [{\n              required: true,\n              message: '请输入您的密码！'\n            }],\n            children: /*#__PURE__*/_jsxDEV(_Input.Password, {\n              prefix: /*#__PURE__*/_jsxDEV(LockOutlined, {\n                className: \"site-form-item-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 41\n              }, this),\n              type: \"password\",\n              placeholder: \"\\u5BC6\\u7801\",\n              onChange: this.handlePassword\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n            children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"remember\",\n              noStyle: true,\n              children: /*#__PURE__*/_jsxDEV(_Checkbox, {\n                children: \"\\u8BB0\\u4F4F\\u6211\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              className: \"login-form-forgot\",\n              to: \"/forgetPwd\",\n              id: \"forgetPassword\",\n              children: \"\\u5FD8\\u8BB0\\u5BC6\\u7801\\uFF1F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n            id: \"buttons\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"myBtn\",\n              children: [/*#__PURE__*/_jsxDEV(_Button, {\n                type: \"primary\",\n                htmlType: \"submit\",\n                className: \"login-form-button\",\n                onClick: this.handleSubmit,\n                children: \"\\u767B\\u5F55\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(_Button, {\n                type: \"primary\",\n                className: \"login-form-button\",\n                onClick: this.goRegister,\n                children: \"\\u6CE8\\u518C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/home/kzj/project/finalize/B-S-/源码/react_code/src/pages/Login/index.jsx"],"names":["React","Component","axios","UserOutlined","LockOutlined","cookie","Link","Login","state","username","password","handleUsername","e","setState","target","value","handlePassword","handleSubmit","that","post","then","response","data","result","status","save","path","email","window","location","href","warning","catch","error","console","log","goRegister","componentWillMount","load","change","undefined","success","remove","componentDidMount","render","remember","required","message","trigger","min","max"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport axios from \"axios\";\nimport { Form, Input, Button, Checkbox, message} from 'antd';\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\nimport cookie from 'react-cookies'\nimport './index.css'\nimport {Link} from \"react-router-dom\";\n\n\nclass Login extends Component {\n    //防止修改url访问\n    componentWillMount () {\n        const username = cookie.load('username');\n        const change = cookie.load('changeSuccess');\n        if (username !== undefined) window.location.href = '/index';\n        if(change !== undefined){\n            message.success(\"密码修改成功，请重新登录\", 2);\n            cookie.remove('changeSuccess', {path:'/'})\n        }\n    }\n\n    componentDidMount () {\n        if (cookie.load('registerSuccess') !== undefined) {\n            message.success('注册成功，请登陆', 2)\n            cookie.remove('registerSuccess', {path:'/'})\n        }\n    }\n\n    state = {\n        username: '',\n        password: ''\n    }\n\n    //保存用户输入的用户名\n    handleUsername = e => {\n        this.setState({username: e.target.value})\n    }\n\n    //保存用户输入的密码\n    handlePassword = e => {\n        this.setState({password: e.target.value})\n    }\n\n    //处理表单请求\n    handleSubmit = () => {\n        let that = this\n        if (that.state.username === '' && that.state.password === '') return\n        axios.post('/login', {\n            username: this.state.username,\n            password: this.state.password\n        })\n            .then(function (response) {\n                const data = response.data\n                const result = data.status\n                if (result === 'success'){\n                    cookie.save('username', that.state.username, { path: '/' });\n                    cookie.save('loginSuccess', true, { path: '/' });\n                    cookie.save('email', data.email, {path:'/'});\n                    window.location.href = '/index';\n                }\n                else{\n                    message.warning('账号或密码错误', 2)\n                }\n            })\n            .catch(function (error) {\n                console.log(error);\n            });\n    }\n\n    //跳转注册界面\n    goRegister = () => {\n        window.location.href = '/register'\n    }\n\n    render () {\n        return (\n            <div className='myForm'>\n                <img src={'./images/loginPicture.jpg'} alt={'loginPicture'} className='leftPicture'/>\n                <div className='right'>\n                    <h6 className='title'>用户登录</h6>\n                    <hr className='line'/>\n                    <Form\n                        name=\"normal_login\"\n                        className=\"trueForm\"\n                        initialValues={{\n                            remember: true,\n                        }}\n                    >\n                        <Form.Item\n                            name=\"username\"\n                            rules={[\n                                {\n                                    required: true,\n                                    message: '请输入您的用户名',\n                                    trigger: 'blur'\n                                },\n                                {\n                                    min: 6,\n                                    max: 18,\n                                    message: '用户名长度应为6-18个字符',\n                                    trigger: 'blur'\n                                }\n                            ]}\n                        >\n                            <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"用户名\" onChange={this.handleUsername}/>\n                        </Form.Item>\n                        <Form.Item\n                            name=\"password\"\n                            rules={[\n                                {\n                                    required: true,\n                                    message: '请输入您的密码！',\n                                },\n                            ]}\n                        >\n                            <Input.Password\n                                prefix={<LockOutlined className=\"site-form-item-icon\"/>}\n                                type=\"password\"\n                                placeholder=\"密码\"\n                                onChange={this.handlePassword}\n                            />\n                        </Form.Item>\n                        <Form.Item >\n                            <Form.Item name=\"remember\" noStyle>\n                                <Checkbox>记住我</Checkbox>\n                            </Form.Item>\n                            <Link className=\"login-form-forgot\" to=\"/forgetPwd\" id=\"forgetPassword\">\n                                忘记密码？\n                            </Link>\n                        </Form.Item>\n\n                        <Form.Item id='buttons'>\n                            <div className='myBtn'>\n                                <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\"\n                                        onClick = {this.handleSubmit}>\n                                    登录\n                                </Button>\n                                <Button type=\"primary\" className=\"login-form-button\" onClick = {this.goRegister}>\n                                    注册\n                                </Button>\n                            </div>\n                        </Form.Item>\n                    </Form>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}