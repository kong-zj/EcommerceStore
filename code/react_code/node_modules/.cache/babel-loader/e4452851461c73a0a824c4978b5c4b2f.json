{"ast":null,"code":"import \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\nvar _jsxFileName = \"/home/kzj/project/finalize/B-S-/\\u6E90\\u7801/react_code/src/pages/EditDeviceModal/index.jsx\";\nimport React, { Component } from 'react';\nimport { Map, Polyline, Marker } from 'react-amap';\nimport { FormOutlined } from \"@ant-design/icons\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass EditDeviceModal extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      editVisible: false,\n      removeVisible: false,\n      trackVisible: false,\n      deviceID: \"\",\n      deviceName: \"\",\n      path: [],\n      points: []\n    };\n\n    this.showModal1 = () => {\n      this.setState({\n        editVisible: true\n      });\n    };\n\n    this.showModal2 = () => {\n      this.setState({\n        removeVisible: true\n      });\n    };\n\n    this.showModal3 = () => {\n      this.setState({\n        trackVisible: true\n      });\n    };\n\n    this.handleOk = () => {\n      const {\n        deviceID\n      } = this.state;\n      const deviceName = this.deviceName.props.value;\n      if (deviceName === undefined) _message.warning('请输入修改后的设备名称', 10);else if (deviceName === this.state.deviceName) _message.warning('设备名称未变化', 10);else {\n        console.log(deviceName);\n        axios.post('/alterDeviceName', {\n          deviceID,\n          deviceName\n        }).then(response => {\n          const data = response.data;\n\n          if (data.status === 'success') {\n            console.log(data);\n\n            _message.success('修改成功', 10); // this.props.updateDevice(data.deviceName);\n\n          } else {\n            _message.warning('修改失败', 10);\n          }\n\n          this.setState({\n            loading: true\n          });\n          this.setState({\n            loading: false,\n            visible: false\n          });\n        });\n      }\n    };\n\n    this.handleCancel = () => {\n      this.setState({\n        editVisible: false,\n        removeVisible: false,\n        trackVisible: false\n      });\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (props.deviceName !== state.deviceName) {\n      console.log(props.path);\n      return {\n        deviceID: props.deviceID,\n        deviceName: props.deviceName,\n        path: props.path\n      };\n    }\n\n    return null;\n  }\n\n  render() {\n    const {\n      editVisible,\n      loading,\n      deviceName,\n      removeVisible,\n      trackVisible,\n      path\n    } = this.state;\n    let track = path.map(item => item[0]);\n    const styleC = {\n      background: `url('http://icons.iconarchive.com/icons/paomedia/small-n-flat/1024/map-marker-icon.png')`,\n      backgroundSize: 'contain',\n      backgroundRepeat: 'no-repeat',\n      backgroundPosition: 'center',\n      width: '30px',\n      height: '40px',\n      color: '#000',\n      textAlign: 'center',\n      lineHeight: '40px'\n    };\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"a\", {\n        onClick: this.showModal2,\n        children: \"\\u5220\\u9664\\xA0 \\xA0 \\xA0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        onClick: this.showModal1,\n        children: \"\\u7F16\\u8F91\\u540D\\u79F0\\xA0 \\xA0 \\xA0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        onClick: this.showModal3,\n        children: \"\\u67E5\\u770B\\u8F68\\u8FF9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(_Modal, {\n        visible: editVisible,\n        title: \"\\u7F16\\u8F91\\u8BBE\\u5907\\u540D\\u79F0\",\n        onOk: this.handleOk,\n        onCancel: this.handleCancel,\n        footer: [/*#__PURE__*/_jsxDEV(_Button, {\n          onClick: this.handleCancel,\n          children: \"\\u5173\\u95ED\"\n        }, \"back\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(_Button, {\n          type: \"primary\",\n          loading: loading,\n          onClick: this.handleOk,\n          children: \"\\u786E\\u8BA4\\u4FEE\\u6539\"\n        }, \"submit\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 25\n        }, this)],\n        children: /*#__PURE__*/_jsxDEV(_Form, {\n          children: /*#__PURE__*/_jsxDEV(_Form.Item, {\n            name: \"deviceName\",\n            rules: [{\n              required: true,\n              message: '请输入设备名称',\n              trigger: 'blur'\n            }],\n            children: /*#__PURE__*/_jsxDEV(_Input, {\n              prefix: /*#__PURE__*/_jsxDEV(FormOutlined, {\n                className: \"site-form-item-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 44\n              }, this),\n              placeholder: deviceName,\n              ref: e => this.deviceName = e\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(_Modal, {\n        title: \"\\u786E\\u8BA4\\u5220\\u9664\",\n        visible: removeVisible,\n        footer: [/*#__PURE__*/_jsxDEV(_Button, {\n          onClick: this.handleCancel,\n          children: \"\\u53D6\\u6D88\"\n        }, \"back\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 28\n        }, this), /*#__PURE__*/_jsxDEV(_Button, {\n          type: \"primary\",\n          onClick: event => this.props.deleteDevice(),\n          children: \"\\u786E\\u8BA4\\u5220\\u9664\"\n        }, \"submit\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 28\n        }, this)],\n        onCancel: this.handleCancel,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: `确定删除设备${deviceName}?`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(_Modal, {\n        title: \"\\u8F68\\u8FF9\\u5C55\\u793A\",\n        visible: trackVisible,\n        footer: [/*#__PURE__*/_jsxDEV(_Button, {\n          onClick: this.handleCancel,\n          children: \"\\u8FD4\\u56DE\"\n        }, \"back\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 28\n        }, this)],\n        width: 800,\n        onCancel: this.handleCancel,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"map\",\n          style: {\n            width: \"100%\",\n            height: \"450px\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Map, {\n            plugins: ['ToolBar'],\n            zoom: 10,\n            center: track.length === 0 ? '' : track[0],\n            children: [/*#__PURE__*/_jsxDEV(Polyline, {\n              path: track,\n              strokeColor: 'black'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 29\n            }, this), path.map(item => item[1] === 0 ? /*#__PURE__*/_jsxDEV(Marker, {\n              position: item[0]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 66\n            }, this) : /*#__PURE__*/_jsxDEV(Marker, {\n              position: item[0],\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: styleC\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 64\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 37\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default EditDeviceModal;","map":{"version":3,"sources":["/home/kzj/project/finalize/B-S-/源码/react_code/src/pages/EditDeviceModal/index.jsx"],"names":["React","Component","Map","Polyline","Marker","FormOutlined","axios","EditDeviceModal","state","editVisible","removeVisible","trackVisible","deviceID","deviceName","path","points","showModal1","setState","showModal2","showModal3","handleOk","props","value","undefined","warning","console","log","post","then","response","data","status","success","loading","visible","handleCancel","getDerivedStateFromProps","render","track","map","item","styleC","background","backgroundSize","backgroundRepeat","backgroundPosition","width","height","color","textAlign","lineHeight","required","message","trigger","e","event","deleteDevice","length"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Modal, Button, Form, Input, message} from 'antd';\nimport { Map, Polyline, Marker } from 'react-amap';\nimport {FormOutlined} from \"@ant-design/icons\";\nimport axios from \"axios\";\n\nclass EditDeviceModal extends Component {\n    state = {\n        editVisible: false,\n        removeVisible:false,\n        trackVisible:false,\n        deviceID: \"\",\n        deviceName: \"\",\n        path:[],\n        points:[]\n    };\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.deviceName !== state.deviceName) {\n            console.log(props.path)\n            return {\n                deviceID: props.deviceID,\n                deviceName: props.deviceName,\n                path:props.path\n            }\n        }\n        return null\n    }\n\n    showModal1 = () => {\n        this.setState({\n            editVisible: true,\n        });\n    };\n\n    showModal2 = () => {\n        this.setState({\n            removeVisible:true,\n        });\n    };\n\n    showModal3 = () => {\n        this.setState({\n            trackVisible:true,\n        });\n    }\n\n\n    handleOk = () => {\n        const {deviceID} = this.state;\n        const deviceName = this.deviceName.props.value;\n        if (deviceName === undefined) message.warning('请输入修改后的设备名称', 10);\n        else if(deviceName === this.state.deviceName) message.warning('设备名称未变化', 10);\n        else{\n            console.log(deviceName)\n            axios.post('/alterDeviceName', {\n                deviceID,\n                deviceName\n            }).then(response => {\n                const data = response.data;\n                if(data.status === 'success'){\n                    console.log(data)\n                    message.success('修改成功', 10);\n                    // this.props.updateDevice(data.deviceName);\n                }\n                else{\n                    message.warning('修改失败', 10);\n                }\n                this.setState({ loading: true });\n                this.setState({ loading: false, visible: false });\n            })\n        }\n\n    };\n\n    handleCancel = () => {\n        this.setState({ editVisible: false, removeVisible:false, trackVisible:false });\n    };\n\n    render() {\n        const { editVisible, loading, deviceName, removeVisible, trackVisible,path } = this.state;\n        let track = path.map(item => item[0]);\n        const styleC = {\n            background: `url('http://icons.iconarchive.com/icons/paomedia/small-n-flat/1024/map-marker-icon.png')`,\n            backgroundSize: 'contain',\n            backgroundRepeat: 'no-repeat',\n            backgroundPosition: 'center',\n            width: '30px',\n            height: '40px',\n            color: '#000',\n            textAlign: 'center',\n            lineHeight: '40px'\n        }\n        return (\n            <>\n                <a onClick={this.showModal2}>删除&nbsp; &nbsp; &nbsp;</a>\n                <a onClick={this.showModal1}>编辑名称&nbsp; &nbsp; &nbsp;</a>\n                <a onClick={this.showModal3}>查看轨迹</a>\n                <Modal\n                    visible={editVisible}\n                    title=\"编辑设备名称\"\n                    onOk={this.handleOk}\n                    onCancel={this.handleCancel}\n                    footer={[\n                        <Button key=\"back\" onClick={this.handleCancel}>\n                            关闭\n                        </Button>,\n                        <Button key=\"submit\" type=\"primary\" loading={loading} onClick={this.handleOk}>\n                            确认修改\n                        </Button>,\n                    ]}\n                >\n                    <Form>\n                        <Form.Item\n                            name=\"deviceName\"\n                            rules={[\n                                {\n                                    required: true,\n                                    message: '请输入设备名称',\n                                    trigger: 'blur'\n                                }\n                            ]}\n                        >\n                            <Input prefix={<FormOutlined className=\"site-form-item-icon\" />} placeholder={deviceName} ref={e => this.deviceName = e}/>\n                        </Form.Item>\n                    </Form>\n                </Modal>\n                <Modal title=\"确认删除\" visible={removeVisible}\n                       footer={[\n                           <Button key=\"back\" onClick={this.handleCancel}>\n                               取消\n                           </Button>,\n                           <Button key=\"submit\" type=\"primary\" onClick={event => this.props.deleteDevice()}>\n                               确认删除\n                           </Button>,\n                       ]}\n                       onCancel={this.handleCancel}>\n                    <p>{`确定删除设备${deviceName}?`}</p>\n                </Modal>\n                <Modal title=\"轨迹展示\" visible={trackVisible}\n                       footer={[\n                           <Button key=\"back\" onClick={this.handleCancel}>\n                               返回\n                           </Button>\n                       ]}\n                    width={800}\n                       onCancel={this.handleCancel}\n                >\n                    <div id={\"map\"} style={{width:\"100%\", height:\"450px\"}}>\n                        <Map plugins={['ToolBar']} zoom={10} center={track.length === 0 ? '' : track[0]}>\n                            <Polyline\n                                path={ track }\n                                strokeColor={'black'}\n                            />\n                            {\n                                path.map(item => item[1] === 0 ? <Marker position={item[0]} /> :\n                                    <Marker position={item[0]}><div style={styleC}/></Marker>)\n                            }\n\n                        </Map>\n                    </div>\n                </Modal>\n            </>\n        );\n    }\n}\n\nexport default EditDeviceModal;"]},"metadata":{},"sourceType":"module"}