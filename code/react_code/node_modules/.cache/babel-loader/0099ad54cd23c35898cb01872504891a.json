{"ast":null,"code":"import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"autoComplete\", \"onChange\", \"onFocus\", \"onBlur\", \"onPressEnter\", \"onKeyDown\", \"prefixCls\", \"disabled\", \"htmlSize\", \"className\", \"maxLength\", \"suffix\", \"showCount\", \"type\", \"inputClassName\"];\nimport React, { useRef, useState, forwardRef, useImperativeHandle, useEffect } from 'react';\nimport BaseInput from './BaseInput';\nimport omit from \"rc-util/es/omit\";\nimport { fixControlledValue, hasAddon, hasPrefixSuffix, resolveOnChange, triggerFocus } from './utils/commonUtils';\nimport classNames from 'classnames';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nvar Input = /*#__PURE__*/forwardRef(function (props, ref) {\n  var autoComplete = props.autoComplete,\n      onChange = props.onChange,\n      onFocus = props.onFocus,\n      onBlur = props.onBlur,\n      onPressEnter = props.onPressEnter,\n      onKeyDown = props.onKeyDown,\n      _props$prefixCls = props.prefixCls,\n      prefixCls = _props$prefixCls === void 0 ? 'rc-input' : _props$prefixCls,\n      disabled = props.disabled,\n      htmlSize = props.htmlSize,\n      className = props.className,\n      maxLength = props.maxLength,\n      suffix = props.suffix,\n      showCount = props.showCount,\n      _props$type = props.type,\n      type = _props$type === void 0 ? 'text' : _props$type,\n      inputClassName = props.inputClassName,\n      rest = _objectWithoutProperties(props, _excluded);\n\n  var _useMergedState = useMergedState(props.defaultValue, {\n    value: props.value\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      value = _useMergedState2[0],\n      setValue = _useMergedState2[1];\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      focused = _useState2[0],\n      setFocused = _useState2[1];\n\n  var inputRef = useRef(null);\n\n  var focus = function focus(option) {\n    if (inputRef.current) {\n      triggerFocus(inputRef.current, option);\n    }\n  };\n\n  useImperativeHandle(ref, function () {\n    return {\n      focus: focus,\n      blur: function blur() {\n        var _inputRef$current;\n\n        (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.blur();\n      },\n      setSelectionRange: function setSelectionRange(start, end, direction) {\n        var _inputRef$current2;\n\n        (_inputRef$current2 = inputRef.current) === null || _inputRef$current2 === void 0 ? void 0 : _inputRef$current2.setSelectionRange(start, end, direction);\n      },\n      select: function select() {\n        var _inputRef$current3;\n\n        (_inputRef$current3 = inputRef.current) === null || _inputRef$current3 === void 0 ? void 0 : _inputRef$current3.select();\n      },\n      input: inputRef.current\n    };\n  });\n  useEffect(function () {\n    setFocused(function (prev) {\n      return prev && disabled ? false : prev;\n    });\n  }, [disabled]);\n\n  var handleChange = function handleChange(e) {\n    setValue(e.target.value);\n\n    if (inputRef.current) {\n      resolveOnChange(inputRef.current, e, onChange);\n    }\n  };\n\n  var handleKeyDown = function handleKeyDown(e) {\n    if (onPressEnter && e.key === 'Enter') {\n      onPressEnter(e);\n    }\n\n    onKeyDown === null || onKeyDown === void 0 ? void 0 : onKeyDown(e);\n  };\n\n  var handleFocus = function handleFocus(e) {\n    setFocused(true);\n    onFocus === null || onFocus === void 0 ? void 0 : onFocus(e);\n  };\n\n  var handleBlur = function handleBlur(e) {\n    setFocused(false);\n    onBlur === null || onBlur === void 0 ? void 0 : onBlur(e);\n  };\n\n  var handleReset = function handleReset(e) {\n    setValue('');\n    focus();\n\n    if (inputRef.current) {\n      resolveOnChange(inputRef.current, e, onChange);\n    }\n  };\n\n  var getInputElement = function getInputElement() {\n    // Fix https://fb.me/react-unknown-prop\n    var otherProps = omit(props, ['prefixCls', 'onPressEnter', 'addonBefore', 'addonAfter', 'prefix', 'suffix', 'allowClear', // Input elements must be either controlled or uncontrolled,\n    // specify either the value prop, or the defaultValue prop, but not both.\n    'defaultValue', 'showCount', 'affixWrapperClassName', 'groupClassName', 'inputClassName', 'wrapperClassName', 'htmlSize']);\n    return /*#__PURE__*/React.createElement(\"input\", _objectSpread(_objectSpread({\n      autoComplete: autoComplete\n    }, otherProps), {}, {\n      onChange: handleChange,\n      onFocus: handleFocus,\n      onBlur: handleBlur,\n      onKeyDown: handleKeyDown,\n      className: classNames(prefixCls, _defineProperty({}, \"\".concat(prefixCls, \"-disabled\"), disabled), inputClassName, !hasAddon(props) && !hasPrefixSuffix(props) && className),\n      ref: inputRef,\n      size: htmlSize,\n      type: type\n    }));\n  };\n\n  var getSuffix = function getSuffix() {\n    // Max length value\n    var hasMaxLength = Number(maxLength) > 0;\n\n    if (suffix || showCount) {\n      var valueLength = _toConsumableArray(fixControlledValue(value)).length;\n\n      var dataCount = _typeof(showCount) === 'object' ? showCount.formatter({\n        count: valueLength,\n        maxLength: maxLength\n      }) : \"\".concat(valueLength).concat(hasMaxLength ? \" / \".concat(maxLength) : '');\n      return /*#__PURE__*/React.createElement(React.Fragment, null, !!showCount && /*#__PURE__*/React.createElement(\"span\", {\n        className: classNames(\"\".concat(prefixCls, \"-show-count-suffix\"), _defineProperty({}, \"\".concat(prefixCls, \"-show-count-has-suffix\"), !!suffix))\n      }, dataCount), suffix);\n    }\n\n    return null;\n  };\n\n  return /*#__PURE__*/React.createElement(BaseInput, _objectSpread(_objectSpread({}, rest), {}, {\n    prefixCls: prefixCls,\n    className: className,\n    inputElement: getInputElement(),\n    handleReset: handleReset,\n    value: fixControlledValue(value),\n    focused: focused,\n    triggerFocus: focus,\n    suffix: getSuffix(),\n    disabled: disabled\n  }));\n});\nexport default Input;","map":{"version":3,"sources":["/home/kzj/project/finalize/final/code/react_code/node_modules/rc-input/es/Input.js"],"names":["_typeof","_toConsumableArray","_defineProperty","_objectSpread","_slicedToArray","_objectWithoutProperties","_excluded","React","useRef","useState","forwardRef","useImperativeHandle","useEffect","BaseInput","omit","fixControlledValue","hasAddon","hasPrefixSuffix","resolveOnChange","triggerFocus","classNames","useMergedState","Input","props","ref","autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","_props$prefixCls","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","_props$type","type","inputClassName","rest","_useMergedState","defaultValue","value","_useMergedState2","setValue","_useState","_useState2","focused","setFocused","inputRef","focus","option","current","blur","_inputRef$current","setSelectionRange","start","end","direction","_inputRef$current2","select","_inputRef$current3","input","prev","handleChange","e","target","handleKeyDown","key","handleFocus","handleBlur","handleReset","getInputElement","otherProps","createElement","concat","size","getSuffix","hasMaxLength","Number","valueLength","length","dataCount","formatter","count","Fragment","inputElement"],"mappings":"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","sourcesContent":["import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"autoComplete\", \"onChange\", \"onFocus\", \"onBlur\", \"onPressEnter\", \"onKeyDown\", \"prefixCls\", \"disabled\", \"htmlSize\", \"className\", \"maxLength\", \"suffix\", \"showCount\", \"type\", \"inputClassName\"];\nimport React, { useRef, useState, forwardRef, useImperativeHandle, useEffect } from 'react';\nimport BaseInput from './BaseInput';\nimport omit from \"rc-util/es/omit\";\nimport { fixControlledValue, hasAddon, hasPrefixSuffix, resolveOnChange, triggerFocus } from './utils/commonUtils';\nimport classNames from 'classnames';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nvar Input = /*#__PURE__*/forwardRef(function (props, ref) {\n  var autoComplete = props.autoComplete,\n      onChange = props.onChange,\n      onFocus = props.onFocus,\n      onBlur = props.onBlur,\n      onPressEnter = props.onPressEnter,\n      onKeyDown = props.onKeyDown,\n      _props$prefixCls = props.prefixCls,\n      prefixCls = _props$prefixCls === void 0 ? 'rc-input' : _props$prefixCls,\n      disabled = props.disabled,\n      htmlSize = props.htmlSize,\n      className = props.className,\n      maxLength = props.maxLength,\n      suffix = props.suffix,\n      showCount = props.showCount,\n      _props$type = props.type,\n      type = _props$type === void 0 ? 'text' : _props$type,\n      inputClassName = props.inputClassName,\n      rest = _objectWithoutProperties(props, _excluded);\n\n  var _useMergedState = useMergedState(props.defaultValue, {\n    value: props.value\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      value = _useMergedState2[0],\n      setValue = _useMergedState2[1];\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      focused = _useState2[0],\n      setFocused = _useState2[1];\n\n  var inputRef = useRef(null);\n\n  var focus = function focus(option) {\n    if (inputRef.current) {\n      triggerFocus(inputRef.current, option);\n    }\n  };\n\n  useImperativeHandle(ref, function () {\n    return {\n      focus: focus,\n      blur: function blur() {\n        var _inputRef$current;\n\n        (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.blur();\n      },\n      setSelectionRange: function setSelectionRange(start, end, direction) {\n        var _inputRef$current2;\n\n        (_inputRef$current2 = inputRef.current) === null || _inputRef$current2 === void 0 ? void 0 : _inputRef$current2.setSelectionRange(start, end, direction);\n      },\n      select: function select() {\n        var _inputRef$current3;\n\n        (_inputRef$current3 = inputRef.current) === null || _inputRef$current3 === void 0 ? void 0 : _inputRef$current3.select();\n      },\n      input: inputRef.current\n    };\n  });\n  useEffect(function () {\n    setFocused(function (prev) {\n      return prev && disabled ? false : prev;\n    });\n  }, [disabled]);\n\n  var handleChange = function handleChange(e) {\n    setValue(e.target.value);\n\n    if (inputRef.current) {\n      resolveOnChange(inputRef.current, e, onChange);\n    }\n  };\n\n  var handleKeyDown = function handleKeyDown(e) {\n    if (onPressEnter && e.key === 'Enter') {\n      onPressEnter(e);\n    }\n\n    onKeyDown === null || onKeyDown === void 0 ? void 0 : onKeyDown(e);\n  };\n\n  var handleFocus = function handleFocus(e) {\n    setFocused(true);\n    onFocus === null || onFocus === void 0 ? void 0 : onFocus(e);\n  };\n\n  var handleBlur = function handleBlur(e) {\n    setFocused(false);\n    onBlur === null || onBlur === void 0 ? void 0 : onBlur(e);\n  };\n\n  var handleReset = function handleReset(e) {\n    setValue('');\n    focus();\n\n    if (inputRef.current) {\n      resolveOnChange(inputRef.current, e, onChange);\n    }\n  };\n\n  var getInputElement = function getInputElement() {\n    // Fix https://fb.me/react-unknown-prop\n    var otherProps = omit(props, ['prefixCls', 'onPressEnter', 'addonBefore', 'addonAfter', 'prefix', 'suffix', 'allowClear', // Input elements must be either controlled or uncontrolled,\n    // specify either the value prop, or the defaultValue prop, but not both.\n    'defaultValue', 'showCount', 'affixWrapperClassName', 'groupClassName', 'inputClassName', 'wrapperClassName', 'htmlSize']);\n    return /*#__PURE__*/React.createElement(\"input\", _objectSpread(_objectSpread({\n      autoComplete: autoComplete\n    }, otherProps), {}, {\n      onChange: handleChange,\n      onFocus: handleFocus,\n      onBlur: handleBlur,\n      onKeyDown: handleKeyDown,\n      className: classNames(prefixCls, _defineProperty({}, \"\".concat(prefixCls, \"-disabled\"), disabled), inputClassName, !hasAddon(props) && !hasPrefixSuffix(props) && className),\n      ref: inputRef,\n      size: htmlSize,\n      type: type\n    }));\n  };\n\n  var getSuffix = function getSuffix() {\n    // Max length value\n    var hasMaxLength = Number(maxLength) > 0;\n\n    if (suffix || showCount) {\n      var valueLength = _toConsumableArray(fixControlledValue(value)).length;\n\n      var dataCount = _typeof(showCount) === 'object' ? showCount.formatter({\n        count: valueLength,\n        maxLength: maxLength\n      }) : \"\".concat(valueLength).concat(hasMaxLength ? \" / \".concat(maxLength) : '');\n      return /*#__PURE__*/React.createElement(React.Fragment, null, !!showCount && /*#__PURE__*/React.createElement(\"span\", {\n        className: classNames(\"\".concat(prefixCls, \"-show-count-suffix\"), _defineProperty({}, \"\".concat(prefixCls, \"-show-count-has-suffix\"), !!suffix))\n      }, dataCount), suffix);\n    }\n\n    return null;\n  };\n\n  return /*#__PURE__*/React.createElement(BaseInput, _objectSpread(_objectSpread({}, rest), {}, {\n    prefixCls: prefixCls,\n    className: className,\n    inputElement: getInputElement(),\n    handleReset: handleReset,\n    value: fixControlledValue(value),\n    focused: focused,\n    triggerFocus: focus,\n    suffix: getSuffix(),\n    disabled: disabled\n  }));\n});\nexport default Input;"]},"metadata":{},"sourceType":"module"}