{"ast":null,"code":"import \"antd/es/card/style\";\nimport _Card from \"antd/es/card\";\nimport \"antd/es/progress/style\";\nimport _Progress from \"antd/es/progress\";\nimport \"antd/es/statistic/style\";\nimport _Statistic from \"antd/es/statistic\";\nimport \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\nvar _jsxFileName = \"/home/kzj/project/finalize/B-S-/\\u6E90\\u7801/\\u524D\\u7AEF/src/pages/DevicesChart/index.jsx\";\nimport React, { Component } from 'react';\nimport * as echarts from 'echarts/core';\nimport { GridComponent, TitleComponent, TooltipComponent, ToolboxComponent } from 'echarts/components';\nimport { CanvasRenderer } from 'echarts/renderers';\nimport { AppstoreTwoTone, CloudTwoTone, ApiTwoTone } from '@ant-design/icons';\nimport { LineChart } from 'echarts/charts';\nimport './index.css';\nimport axios from \"axios\";\nimport cookie from \"react-cookies\";\nimport object_sizeof from 'object-sizeof';\nimport moment from 'moment';\nimport sizeof from \"object-sizeof\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\necharts.use([GridComponent, LineChart, CanvasRenderer, TitleComponent, TooltipComponent, ToolboxComponent]);\nexport default class DevicesChart extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      deviceArray: [],\n      messages: {},\n      onlineTimeInterval: {},\n      onlineTimePoint: {},\n      onlineNumber: 0,\n      offlineNumber: 0\n    };\n  }\n\n  async componentDidMount() {\n    console.log(object_sizeof({\n      abc: 'def'\n    }));\n    await axios.post(\"/getPersonalInfo\", {\n      username: cookie.load('username')\n    }).then(response => {\n      const data = response.data;\n      let online = 0,\n          offline = 0;\n\n      if (data.code === \"success\") {\n        let array = data.deviceArray.map((item, index) => {\n          if (item.isOnline === 1) online++;else offline++;\n          return {\n            key: index + 1,\n            deviceName: item.deviceName,\n            deviceID: item.deviceID,\n            deviceStatus: item.isOnline\n          };\n        });\n        array.forEach(item => {\n          const deviceID = item.deviceID;\n          axios.post('/getDeviceInfo', {\n            deviceID: deviceID\n          }).then(response => {\n            const data = response.data;\n            const message = data.deviceMessage;\n\n            if (data.status === 'failed') {\n              message.warning(\"获取设备信息失败\");\n            } else if (data.status === 'notExist') {\n              message.warning('设备不存在');\n            } else {\n              const messageArray = message.map((item, index) => {\n                const obj = JSON.parse(item.content);\n                let infoItem = {\n                  key: item.messageID,\n                  messageID: item.messageID,\n                  messageType: obj.alert,\n                  messageContent: obj.info,\n                  lat: obj.lat,\n                  lng: obj.lng,\n                  timestamp: obj.timestamp,\n                  time: new Date(parseInt(obj.timestamp)).toLocaleDateString() + ' ' + new Date(parseInt(obj.timestamp)).toLocaleTimeString(),\n                  date: new Date(parseInt(obj.timestamp)).toLocaleDateString()\n                };\n                return infoItem;\n              });\n              const messages = { ...this.state.messages\n              };\n              messages[deviceID] = messageArray;\n              this.setState({\n                deviceArray: array,\n                onlineNumber: online,\n                offlineNumber: offline,\n                messages: messages\n              }, () => {\n                const today = moment();\n                const dateArray = [moment(moment().subtract(6, 'days')).format('YYYY/M/D'), moment(moment().subtract(5, 'days')).format('YYYY/M/D'), moment(moment().subtract(4, 'days')).format('YYYY/M/D'), moment(moment().subtract(3, 'days')).format('YYYY/M/D'), moment(moment().subtract(2, 'days')).format('YYYY/M/D'), moment(moment().subtract(1, 'days')).format('YYYY/M/D'), today.format('YYYY/M/D')];\n                console.log(dateArray);\n                let messageRound = [];\n                const {\n                  messages,\n                  deviceArray\n                } = this.state;\n                let normal = 0,\n                    warning = 0,\n                    online = 0,\n                    offline = 0,\n                    day1 = 0,\n                    day2 = 0,\n                    day3 = 0,\n                    day4 = 0,\n                    day5 = 0,\n                    day6 = 0,\n                    day7 = 0;\n                deviceArray.forEach(device => {\n                  if (messages[device.deviceID] !== undefined) {\n                    messages[device.deviceID].forEach(message => {\n                      if (message.messageType === 0) normal++;\n                      if (message.messageType === 1) warning++;\n                      if (message.messageType === 2) online++;\n                      if (message.messageType === 3) offline++;\n                      const m2 = moment(new Date(message.timestamp).toLocaleDateString());\n                      const diff = today.diff(m2, 'day');\n                      if (diff === 0) day1 += sizeof(message.messageContent) / 1000;\n                      if (diff === 1) day2 += sizeof(message.messageContent) / 1000;\n                      if (diff === 2) day3 += sizeof(message.messageContent) / 1000;\n                      if (diff === 3) day4 += sizeof(message.messageContent) / 1000;\n                      if (diff === 4) day5 += sizeof(message.messageContent) / 1000;\n                      if (diff === 5) day6 += sizeof(message.messageContent) / 1000;\n                      if (diff === 6) day7 += sizeof(message.messageContent) / 1000;\n                    });\n                  }\n                });\n                messageRound.push({\n                  value: normal,\n                  name: '正常信息'\n                });\n                messageRound.push({\n                  value: warning,\n                  name: '告警信息'\n                });\n                messageRound.push({\n                  value: online,\n                  name: '上线信息'\n                });\n                messageRound.push({\n                  value: offline,\n                  name: '下线信息'\n                });\n                const chartDom = document.getElementById('dataChart');\n                let myChart = echarts.init(chartDom);\n                let option = {\n                  xAxis: {\n                    type: 'category',\n                    data: dateArray\n                  },\n                  yAxis: {\n                    name: '单位(KB)',\n                    type: 'value'\n                  },\n                  tooltip: {\n                    trigger: 'axis'\n                  },\n                  series: [{\n                    data: [day7.toFixed(3), day6.toFixed(3), day5.toFixed(3), day4.toFixed(3), day3.toFixed(3), day2.toFixed(3), day1.toFixed(3)],\n                    type: 'line',\n                    symbol: 'circle',\n                    symbolSize: 10,\n                    lineStyle: {\n                      color: '#5470C6',\n                      width: 4,\n                      type: 'dashed'\n                    },\n                    itemStyle: {\n                      borderWidth: 3,\n                      borderColor: '#EE6666',\n                      color: 'yellow'\n                    }\n                  }]\n                };\n                option && myChart.setOption(option);\n                const chartDom1 = document.getElementById('messageChart');\n                let myChart1 = echarts.init(chartDom1);\n                let option1 = {\n                  tooltip: {\n                    trigger: 'item'\n                  },\n                  legend: {\n                    top: '5%',\n                    left: 'center'\n                  },\n                  color: ['rgb(134, 197, 106)', 'rgb(235, 91, 91)', 'rgb(74, 101, 191)', 'rgb(249, 193, 78)'],\n                  series: [{\n                    type: 'pie',\n                    radius: ['40%', '70%'],\n                    avoidLabelOverlap: false,\n                    label: {\n                      show: false,\n                      position: 'center'\n                    },\n                    emphasis: {\n                      label: {\n                        show: true,\n                        fontSize: '40',\n                        fontWeight: 'bold'\n                      }\n                    },\n                    labelLine: {\n                      show: false\n                    },\n                    data: messageRound\n                  }]\n                };\n                option1 && myChart1.setOption(option1);\n                window.addEventListener(\"resize\", function () {\n                  myChart.resize();\n                  myChart1.resize();\n                });\n              });\n            }\n          });\n        });\n      } else {\n        _message.warning(\"获取个人信息出错\").then(r => console.log(r));\n      }\n    });\n  }\n\n  render() {\n    const {\n      onlineNumber,\n      offlineNumber,\n      deviceArray\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"chartContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"deviceChart\",\n        children: /*#__PURE__*/_jsxDEV(_Card, {\n          title: \"\\u8BBE\\u5907\\u603B\\u89C8\",\n          bordered: false,\n          style: {\n            width: '100%'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            id: 'Cards',\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"myCard\",\n              children: /*#__PURE__*/_jsxDEV(_Card, {\n                title: \"\\u603B\\u8BBE\\u5907\\u6570\",\n                hoverable: true,\n                bordered: false,\n                headStyle: {\n                  backgroundImage: 'linear-gradient(120deg, #00e795 0, #0095e2 100%)'\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"cardItem\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item1\",\n                    children: /*#__PURE__*/_jsxDEV(_Statistic, {\n                      value: deviceArray.length,\n                      prefix: /*#__PURE__*/_jsxDEV(AppstoreTwoTone, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 219,\n                        columnNumber: 57\n                      }, this),\n                      width: 50\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 217,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 216,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item2\",\n                    children: /*#__PURE__*/_jsxDEV(_Progress, {\n                      status: \"active\",\n                      strokeColor: {\n                        '0%': '#00e795',\n                        '100%': '#0095e2'\n                      },\n                      percent: 100,\n                      size: 'small'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 224,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 223,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"myCard\",\n              children: /*#__PURE__*/_jsxDEV(_Card, {\n                title: \"\\u5728\\u7EBF\\u8BBE\\u5907\\u6570\",\n                hoverable: true,\n                bordered: false,\n                headStyle: {\n                  backgroundImage: 'linear-gradient(120deg, #f6d365 0, #ff7850 100%)'\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"cardItem\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item1\",\n                    children: /*#__PURE__*/_jsxDEV(_Statistic, {\n                      value: onlineNumber,\n                      prefix: /*#__PURE__*/_jsxDEV(CloudTwoTone, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 243,\n                        columnNumber: 57\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 241,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 240,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item2\",\n                    children: /*#__PURE__*/_jsxDEV(_Progress, {\n                      status: \"active\",\n                      strokeColor: {\n                        '0%': '#f6d365',\n                        '100%': '#ff7850'\n                      },\n                      percent: (onlineNumber * 100 / deviceArray.length).toFixed(0),\n                      size: 'small'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 247,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 246,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"myCard\",\n              children: /*#__PURE__*/_jsxDEV(_Card, {\n                title: \"\\u79BB\\u7EBF\\u8BBE\\u5907\\u6570\",\n                hoverable: true,\n                bordered: false,\n                headStyle: {\n                  backgroundImage: 'linear-gradient(120deg, #7b78c9 0, #60c6f3 100%)'\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"cardItem\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item1\",\n                    children: /*#__PURE__*/_jsxDEV(_Statistic, {\n                      value: offlineNumber,\n                      prefix: /*#__PURE__*/_jsxDEV(ApiTwoTone, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 266,\n                        columnNumber: 57\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 264,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 263,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item2\",\n                    children: /*#__PURE__*/_jsxDEV(_Progress, {\n                      status: \"active\",\n                      strokeColor: {\n                        '0%': '#7b78c9',\n                        '100%': '#60c6f3'\n                      },\n                      percent: (offlineNumber * 100 / deviceArray.length).toFixed(0),\n                      size: 'small'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 270,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 269,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 262,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"dataContainer\",\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between'\n        },\n        children: [/*#__PURE__*/_jsxDEV(_Card, {\n          title: \"\\u8FD1\\u4E00\\u5468\\u63A5\\u6536\\u6570\\u636E\\u91CF\\u7EDF\\u8BA1\",\n          bordered: false,\n          className: 'indexChart',\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '100%'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"dataChart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(_Card, {\n          title: \"\\u4FE1\\u606F\\u5206\\u7C7B\",\n          bordered: false,\n          className: 'indexChart',\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '100%'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"messageChart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/kzj/project/finalize/B-S-/源码/前端/src/pages/DevicesChart/index.jsx"],"names":["React","Component","echarts","GridComponent","TitleComponent","TooltipComponent","ToolboxComponent","CanvasRenderer","AppstoreTwoTone","CloudTwoTone","ApiTwoTone","LineChart","axios","cookie","object_sizeof","moment","sizeof","use","DevicesChart","state","deviceArray","messages","onlineTimeInterval","onlineTimePoint","onlineNumber","offlineNumber","componentDidMount","console","log","abc","post","username","load","then","response","data","online","offline","code","array","map","item","index","isOnline","key","deviceName","deviceID","deviceStatus","forEach","message","deviceMessage","status","warning","messageArray","obj","JSON","parse","content","infoItem","messageID","messageType","alert","messageContent","info","lat","lng","timestamp","time","Date","parseInt","toLocaleDateString","toLocaleTimeString","date","setState","today","dateArray","subtract","format","messageRound","normal","day1","day2","day3","day4","day5","day6","day7","device","undefined","m2","diff","push","value","name","chartDom","document","getElementById","myChart","init","option","xAxis","type","yAxis","tooltip","trigger","series","toFixed","symbol","symbolSize","lineStyle","color","width","itemStyle","borderWidth","borderColor","setOption","chartDom1","myChart1","option1","legend","top","left","radius","avoidLabelOverlap","label","show","position","emphasis","fontSize","fontWeight","labelLine","window","addEventListener","resize","r","render","backgroundImage","length","display","justifyContent"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport * as echarts from 'echarts/core';\nimport {GridComponent, TitleComponent, TooltipComponent, ToolboxComponent } from 'echarts/components';\nimport {CanvasRenderer} from 'echarts/renderers';\nimport {Card, Statistic, Progress, message} from 'antd';\nimport { AppstoreTwoTone, CloudTwoTone, ApiTwoTone } from '@ant-design/icons'\nimport { LineChart } from 'echarts/charts';\nimport './index.css'\nimport axios from \"axios\";\nimport cookie from \"react-cookies\";\nimport object_sizeof from 'object-sizeof';\nimport moment from 'moment'\nimport sizeof from \"object-sizeof\";\n\necharts.use(\n    [GridComponent, LineChart, CanvasRenderer, TitleComponent, TooltipComponent, ToolboxComponent]\n);\n\nexport default class DevicesChart extends Component {\n\n    state = {deviceArray:[], messages:{}, onlineTimeInterval:{}, onlineTimePoint:{}, onlineNumber:0, offlineNumber:0}\n\n    async componentDidMount () {\n        console.log(object_sizeof({abc:'def'}))\n        await axios.post(\"/getPersonalInfo\", {\n            username:cookie.load('username')\n        }).then(response => {\n            const data =  response.data;\n            let online = 0, offline = 0;\n            if(data.code === \"success\"){\n                let array = data.deviceArray.map((item, index) => {\n                    if (item.isOnline === 1) online++;\n                    else offline++;\n                    return {\n                        key: index + 1,\n                        deviceName: item.deviceName,\n                        deviceID: item.deviceID,\n                        deviceStatus: item.isOnline\n                    }\n                });\n                array.forEach(item => {\n                    const deviceID = item.deviceID;\n                    axios.post('/getDeviceInfo', {\n                        deviceID:deviceID\n                    }).then(response => {\n                        const data = response.data;\n                        const message = data.deviceMessage;\n                        if(data.status === 'failed'){\n                            message.warning(\"获取设备信息失败\")\n                        }\n                        else if(data.status === 'notExist'){\n                            message.warning('设备不存在')\n                        }\n                        else{\n                            const messageArray = message.map((item, index) => {\n                                const obj = JSON.parse(item.content);\n                                let infoItem = {\n                                    key: item.messageID,\n                                    messageID: item.messageID,\n                                    messageType: obj.alert,\n                                    messageContent: obj.info,\n                                    lat:obj.lat,\n                                    lng:obj.lng,\n                                    timestamp:obj.timestamp,\n                                    time:(new Date(parseInt(obj.timestamp))).toLocaleDateString() + ' '+ (new Date(parseInt(obj.timestamp))).toLocaleTimeString(),\n                                    date:(new Date(parseInt(obj.timestamp))).toLocaleDateString()\n                                }\n                                return infoItem;\n                            });\n                            const messages = {...this.state.messages};\n                            messages[deviceID] = messageArray;\n\n                            this.setState({deviceArray:array, onlineNumber:online, offlineNumber:offline, messages:messages}, () => {\n\n                                const today = moment();\n                                const dateArray = [\n                                    moment(moment().subtract(6, 'days')).format('YYYY/M/D'),\n                                    moment(moment().subtract(5, 'days')).format('YYYY/M/D'),\n                                    moment(moment().subtract(4, 'days')).format('YYYY/M/D'),\n                                    moment(moment().subtract(3, 'days')).format('YYYY/M/D'),\n                                    moment(moment().subtract(2, 'days')).format('YYYY/M/D'),\n                                    moment(moment().subtract(1, 'days')).format('YYYY/M/D'),\n                                    today.format('YYYY/M/D')]\n                                console.log(dateArray)\n\n                                let messageRound = [];\n                                const {messages, deviceArray} = this.state;\n                                let normal = 0, warning = 0, online = 0, offline = 0, day1 = 0, day2 = 0,\n                                day3 = 0, day4 = 0, day5 = 0, day6 = 0, day7 = 0;\n\n                                deviceArray.forEach(device => {\n                                    if(messages[device.deviceID] !== undefined){\n                                        messages[device.deviceID].forEach(message => {\n                                            if(message.messageType === 0) normal++;\n                                            if(message.messageType === 1) warning++;\n                                            if(message.messageType === 2) online++;\n                                            if(message.messageType === 3) offline++;\n                                            const m2 = moment((new Date(message.timestamp).toLocaleDateString()));\n                                            const diff = today.diff(m2, 'day');\n                                            if(diff === 0) day1 += sizeof(message.messageContent) / 1000;\n                                            if(diff === 1) day2 += sizeof(message.messageContent) / 1000;\n                                            if(diff === 2) day3 += sizeof(message.messageContent) / 1000;\n                                            if(diff === 3) day4 += sizeof(message.messageContent) / 1000;\n                                            if(diff === 4) day5 += sizeof(message.messageContent) / 1000;\n                                            if(diff === 5) day6 += sizeof(message.messageContent) / 1000;\n                                            if(diff === 6) day7 += sizeof(message.messageContent) / 1000;\n                                        })\n                                    }\n                                })\n                                messageRound.push({value:normal, name:'正常信息'});\n                                messageRound.push({value:warning, name:'告警信息'});\n                                messageRound.push({value:online, name:'上线信息'});\n                                messageRound.push({value:offline, name:'下线信息'});\n\n                                const chartDom = document.getElementById ('dataChart');\n                                let myChart = echarts.init (chartDom);\n                                let option = {\n                                    xAxis: {\n                                        type: 'category',\n                                        data: dateArray\n                                    },\n                                    yAxis: {\n                                        name: '单位(KB)',\n                                        type: 'value'\n                                    },\n                                    tooltip: {\n                                        trigger: 'axis'\n                                    },\n                                    series: [\n                                        {\n                                            data: [day7.toFixed(3),\n                                                day6.toFixed(3),\n                                                day5.toFixed(3),\n                                                day4.toFixed(3),\n                                                day3.toFixed(3),\n                                                day2.toFixed(3),\n                                                day1.toFixed(3)],\n                                            type: 'line',\n                                            symbol: 'circle',\n                                            symbolSize: 10,\n                                            lineStyle: {\n                                                color: '#5470C6',\n                                                width: 4,\n                                                type: 'dashed'\n                                            },\n                                            itemStyle: {\n                                                borderWidth: 3,\n                                                borderColor: '#EE6666',\n                                                color: 'yellow'\n                                            }\n                                        }\n                                    ]\n                                };\n                                option && myChart.setOption(option);\n\n                                const chartDom1 = document.getElementById ('messageChart');\n                                let myChart1 = echarts.init (chartDom1);\n                                let option1 = {\n                                    tooltip: {\n                                        trigger: 'item'\n                                    },\n                                    legend: {\n                                        top: '5%',\n                                        left: 'center'\n                                    },\n                                    color:['rgb(134, 197, 106)', 'rgb(235, 91, 91)', 'rgb(74, 101, 191)', 'rgb(249, 193, 78)'],\n                                    series: [\n                                        {\n                                            type: 'pie',\n                                            radius: ['40%', '70%'],\n                                            avoidLabelOverlap: false,\n                                            label: {\n                                                show: false,\n                                                position: 'center'\n                                            },\n                                            emphasis: {\n                                                label: {\n                                                    show: true,\n                                                    fontSize: '40',\n                                                    fontWeight: 'bold'\n                                                }\n                                            },\n                                            labelLine: {\n                                                show: false\n                                            },\n                                            data: messageRound\n                                        }\n                                    ]\n                                };\n                                option1 && myChart1.setOption(option1);\n                                window.addEventListener(\"resize\", function () {\n                                    myChart.resize();\n                                    myChart1.resize();\n                                });\n                            });\n                        }\n                    })\n                })\n            }\n            else{\n                message.warning (\"获取个人信息出错\").then (r  => console.log(r));\n            }\n        })\n    }\n\n    render () {\n        const {onlineNumber, offlineNumber, deviceArray} = this.state;\n        return (\n            <div id='chartContainer'>\n                <div id=\"deviceChart\">\n                    <Card title=\"设备总览\" bordered={false} style={{ width: '100%' }}>\n                        <div id={'Cards'}>\n                            <div className='myCard'>\n                                <Card title='总设备数' hoverable bordered={false} headStyle={{backgroundImage: 'linear-gradient(120deg, #00e795 0, #0095e2 100%)'}}>\n                                    <div className=\"cardItem\">\n                                        <div className='item1'>\n                                            <Statistic\n                                                value={deviceArray.length}\n                                                prefix={<AppstoreTwoTone />}\n                                                width={50}\n                                            />\n                                        </div>\n                                        <div className='item2'>\n                                            <Progress\n                                                status='active'\n                                                strokeColor={{\n                                                    '0%': '#00e795',\n                                                    '100%': '#0095e2',\n                                                }}\n                                                percent={100}\n                                                size={'small'}\n                                            />\n                                        </div>\n                                    </div>\n                                </Card>\n                            </div>\n                            <div className='myCard'>\n                                <Card title=\"在线设备数\" hoverable bordered={false} headStyle={{backgroundImage: 'linear-gradient(120deg, #f6d365 0, #ff7850 100%)'}}>\n                                    <div className=\"cardItem\">\n                                        <div className='item1'>\n                                            <Statistic\n                                                value={onlineNumber}\n                                                prefix={<CloudTwoTone />}\n                                            />\n                                        </div>\n                                        <div className='item2'>\n                                            <Progress\n                                                status='active'\n                                                strokeColor={{\n                                                    '0%': '#f6d365',\n                                                    '100%': '#ff7850',\n                                                }}\n                                                percent={(onlineNumber * 100 / deviceArray.length).toFixed(0)}\n                                                size={'small'}\n                                            />\n                                        </div>\n                                    </div>\n                                </Card>\n                            </div>\n                            <div className='myCard'>\n                                <Card title=\"离线设备数\" hoverable bordered={false} headStyle={{backgroundImage: 'linear-gradient(120deg, #7b78c9 0, #60c6f3 100%)'}}>\n                                    <div className=\"cardItem\">\n                                        <div className='item1'>\n                                            <Statistic\n                                                value={offlineNumber}\n                                                prefix={<ApiTwoTone />}\n                                            />\n                                        </div>\n                                        <div className='item2'>\n                                            <Progress\n                                                status = 'active'\n                                                strokeColor={{\n                                                    '0%': '#7b78c9',\n                                                    '100%': '#60c6f3',\n                                                }}\n                                                percent={(offlineNumber * 100 / deviceArray.length).toFixed(0)}\n                                                size={'small'}\n                                            />\n                                        </div>\n                                    </div>\n                                </Card>\n                            </div>\n                        </div>\n                    </Card>\n                </div>\n                <div id=\"dataContainer\" style={{display:'flex', justifyContent:'space-between'}}>\n                    <Card title=\"近一周接收数据量统计\" bordered={false} className={'indexChart'}>\n                        <div style={{width:'100%'}}>\n                            <div id='dataChart'/>\n                        </div>\n                    </Card>\n                    <Card title=\"信息分类\" bordered={false} className={'indexChart'}>\n                        <div style={{width:'100%'}}>\n                            <div id='messageChart'/>\n                        </div>\n                    </Card>\n                </div>\n            </div>\n\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}