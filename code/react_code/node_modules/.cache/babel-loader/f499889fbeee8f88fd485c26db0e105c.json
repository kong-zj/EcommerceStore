{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar DEFAULT_CONFIG = {\n  v: '1.4.0',\n  hostAndPath: 'webapi.amap.com/maps',\n  key: 'f97efc35164149d0c0f299e7a8adb3d2',\n  callback: '__amap_init_callback',\n  useAMapUI: false\n};\nvar mainPromise = null;\nvar amapuiPromise = null;\nvar amapuiInited = false;\n\nvar APILoader = function () {\n  function APILoader(_ref) {\n    var key = _ref.key,\n        useAMapUI = _ref.useAMapUI,\n        version = _ref.version,\n        protocol = _ref.protocol;\n\n    _classCallCheck(this, APILoader);\n\n    this.config = _extends({}, DEFAULT_CONFIG, {\n      useAMapUI: useAMapUI,\n      protocol: protocol\n    });\n\n    if (typeof window !== 'undefined') {\n      if (key) {\n        this.config.key = key;\n      } else if ('amapkey' in window) {\n        this.config.key = window.amapkey;\n      }\n    }\n\n    if (version) {\n      this.config.v = version;\n    }\n\n    this.protocol = protocol || window.location.protocol;\n\n    if (this.protocol.indexOf(':') === -1) {\n      this.protocol += ':';\n    }\n  }\n\n  _createClass(APILoader, [{\n    key: 'getScriptSrc',\n    value: function getScriptSrc(cfg) {\n      return this.protocol + '//' + cfg.hostAndPath + '?v=' + cfg.v + '&key=' + cfg.key + '&callback=' + cfg.callback;\n    }\n  }, {\n    key: 'buildScriptTag',\n    value: function buildScriptTag(src) {\n      var script = document.createElement('script');\n      script.type = 'text/javascript';\n      script.async = true;\n      script.defer = true;\n      script.src = src;\n      return script;\n    }\n  }, {\n    key: 'getAmapuiPromise',\n    value: function getAmapuiPromise() {\n      var script = this.buildScriptTag(this.protocol + '//webapi.amap.com/ui/1.0/main-async.js');\n      var p = new Promise(function (resolve) {\n        script.onload = function () {\n          resolve();\n        };\n      });\n      document.body.appendChild(script);\n      return p;\n    }\n  }, {\n    key: 'getMainPromise',\n    value: function getMainPromise() {\n      var _this = this;\n\n      var script = this.buildScriptTag(this.getScriptSrc(this.config));\n      var p = new Promise(function (resolve) {\n        window[_this.config.callback] = function () {\n          resolve();\n          delete window[_this.config.callback];\n        };\n      });\n      document.body.appendChild(script);\n      return p;\n    }\n  }, {\n    key: 'load',\n    value: function load() {\n      if (typeof window === 'undefined') {\n        return null;\n      }\n\n      var useAMapUI = this.config.useAMapUI;\n      mainPromise = mainPromise || this.getMainPromise();\n\n      if (useAMapUI) {\n        amapuiPromise = amapuiPromise || this.getAmapuiPromise();\n      }\n\n      return new Promise(function (resolve) {\n        mainPromise.then(function () {\n          if (useAMapUI && amapuiPromise) {\n            amapuiPromise.then(function () {\n              if (window.initAMapUI && !amapuiInited) {\n                window.initAMapUI();\n\n                if (typeof useAMapUI === 'function') {\n                  useAMapUI();\n                }\n\n                amapuiInited = true;\n              }\n\n              resolve();\n            });\n          } else {\n            resolve();\n          }\n        });\n      });\n    }\n  }]);\n\n  return APILoader;\n}();\n\nexports.default = APILoader;","map":{"version":3,"sources":["/home/kzj/project/finalize/final/code/react_code/node_modules/react-amap/lib/utils/APILoader.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_classCallCheck","instance","TypeError","DEFAULT_CONFIG","v","hostAndPath","callback","useAMapUI","mainPromise","amapuiPromise","amapuiInited","APILoader","_ref","version","protocol","config","window","amapkey","location","indexOf","getScriptSrc","cfg","buildScriptTag","src","script","document","createElement","type","async","defer","getAmapuiPromise","p","Promise","resolve","onload","body","appendChild","getMainPromise","_this","load","then","initAMapUI","default"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DEFAULT_CONFIG = {\n  v: '1.4.0',\n  hostAndPath: 'webapi.amap.com/maps',\n  key: 'f97efc35164149d0c0f299e7a8adb3d2',\n  callback: '__amap_init_callback',\n  useAMapUI: false\n};\n\nvar mainPromise = null;\nvar amapuiPromise = null;\nvar amapuiInited = false;\n\nvar APILoader = function () {\n  function APILoader(_ref) {\n    var key = _ref.key,\n        useAMapUI = _ref.useAMapUI,\n        version = _ref.version,\n        protocol = _ref.protocol;\n\n    _classCallCheck(this, APILoader);\n\n    this.config = _extends({}, DEFAULT_CONFIG, { useAMapUI: useAMapUI, protocol: protocol });\n    if (typeof window !== 'undefined') {\n      if (key) {\n        this.config.key = key;\n      } else if ('amapkey' in window) {\n        this.config.key = window.amapkey;\n      }\n    }\n    if (version) {\n      this.config.v = version;\n    }\n    this.protocol = protocol || window.location.protocol;\n    if (this.protocol.indexOf(':') === -1) {\n      this.protocol += ':';\n    }\n  }\n\n  _createClass(APILoader, [{\n    key: 'getScriptSrc',\n    value: function getScriptSrc(cfg) {\n      return this.protocol + '//' + cfg.hostAndPath + '?v=' + cfg.v + '&key=' + cfg.key + '&callback=' + cfg.callback;\n    }\n  }, {\n    key: 'buildScriptTag',\n    value: function buildScriptTag(src) {\n      var script = document.createElement('script');\n      script.type = 'text/javascript';\n      script.async = true;\n      script.defer = true;\n      script.src = src;\n      return script;\n    }\n  }, {\n    key: 'getAmapuiPromise',\n    value: function getAmapuiPromise() {\n      var script = this.buildScriptTag(this.protocol + '//webapi.amap.com/ui/1.0/main-async.js');\n      var p = new Promise(function (resolve) {\n        script.onload = function () {\n          resolve();\n        };\n      });\n      document.body.appendChild(script);\n      return p;\n    }\n  }, {\n    key: 'getMainPromise',\n    value: function getMainPromise() {\n      var _this = this;\n\n      var script = this.buildScriptTag(this.getScriptSrc(this.config));\n      var p = new Promise(function (resolve) {\n        window[_this.config.callback] = function () {\n          resolve();\n          delete window[_this.config.callback];\n        };\n      });\n      document.body.appendChild(script);\n      return p;\n    }\n  }, {\n    key: 'load',\n    value: function load() {\n      if (typeof window === 'undefined') {\n        return null;\n      }\n      var useAMapUI = this.config.useAMapUI;\n\n      mainPromise = mainPromise || this.getMainPromise();\n      if (useAMapUI) {\n        amapuiPromise = amapuiPromise || this.getAmapuiPromise();\n      }\n      return new Promise(function (resolve) {\n        mainPromise.then(function () {\n          if (useAMapUI && amapuiPromise) {\n            amapuiPromise.then(function () {\n              if (window.initAMapUI && !amapuiInited) {\n                window.initAMapUI();\n                if (typeof useAMapUI === 'function') {\n                  useAMapUI();\n                }\n                amapuiInited = true;\n              }\n              resolve();\n            });\n          } else {\n            resolve();\n          }\n        });\n      });\n    }\n  }]);\n\n  return APILoader;\n}();\n\nexports.default = APILoader;"]},"metadata":{},"sourceType":"script"}