{"ast":null,"code":"import \"antd/es/table/style\";\nimport _Table from \"antd/es/table\";\nimport \"antd/es/descriptions/style\";\nimport _Descriptions from \"antd/es/descriptions\";\nimport \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\nimport \"antd/es/tag/style\";\nimport _Tag from \"antd/es/tag\";\nvar _jsxFileName = \"/home/kzj/project/finalize/B-S-/\\u6E90\\u7801/react_code/src/pages/PersonalInfo/index.jsx\";\nimport React, { Component } from 'react';\nimport axios from \"axios\";\nimport cookie from \"react-cookies\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass PersonalInfo extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: cookie.load('username'),\n      email: cookie.load('email'),\n      deviceArray: []\n    };\n    this.columns = [{\n      title: '设备ID',\n      dataIndex: 'deviceID',\n      key: 'id',\n      render: text => /*#__PURE__*/_jsxDEV(Link, {\n        to: {\n          pathname: '/index/editDevice',\n          state: {\n            deviceID: text\n          }\n        },\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 29\n      }, this)\n    }, {\n      title: '设备名称',\n      dataIndex: 'deviceName',\n      key: 'deviceName'\n    }, {\n      title: '设备状态',\n      key: 'deviceStatus',\n      dataIndex: 'deviceStatus',\n      render: tag => /*#__PURE__*/_jsxDEV(_Tag, {\n        color: tag === 0 ? 'red' : 'green',\n        children: tag === 0 ? '离线' : '在线'\n      }, tag, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 28\n      }, this)\n    }];\n  }\n\n  componentDidMount() {\n    const deleteSuccess = cookie.load('deleteSuccess');\n\n    if (deleteSuccess !== undefined) {\n      cookie.remove('deleteSuccess', {\n        path: '/'\n      });\n\n      _message.success('删除设备成功', 2);\n    }\n\n    axios.post(\"/getPersonalInfo\", {\n      username: this.state.username\n    }).then(response => {\n      const data = response.data;\n\n      if (data.code === \"success\") {\n        let array = data.deviceArray.map((item, index) => {\n          return {\n            key: index + 1,\n            deviceName: item.deviceName,\n            deviceID: item.deviceID,\n            deviceStatus: item.isOnline\n          };\n        });\n        this.setState({\n          deviceArray: array\n        });\n      } else {\n        _message.warning(\"获取个人信息出错\").then(r => console.log(r));\n      }\n    });\n  }\n\n  render() {\n    const {\n      username,\n      email,\n      deviceArray\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(_Descriptions, {\n        title: \"\\u4E2A\\u4EBA\\u4FE1\\u606F\",\n        bordered: true,\n        column: {\n          xxl: 4,\n          xl: 3,\n          lg: 3,\n          md: 3,\n          sm: 2,\n          xs: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(_Descriptions.Item, {\n          label: \"\\u7528\\u6237\\u540D\",\n          children: username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(_Descriptions.Item, {\n          label: \"\\u90AE\\u7BB1\",\n          children: email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(_Descriptions, {\n        title: \"\\u8BBE\\u5907\\u4FE1\\u606F\",\n        bordered: true,\n        column: {\n          xxl: 4,\n          xl: 3,\n          lg: 3,\n          md: 3,\n          sm: 2,\n          xs: 1\n        },\n        style: {\n          marginTop: '30px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(_Table, {\n        columns: this.columns,\n        dataSource: deviceArray\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default PersonalInfo;","map":{"version":3,"sources":["/home/kzj/project/finalize/B-S-/源码/react_code/src/pages/PersonalInfo/index.jsx"],"names":["React","Component","axios","cookie","Link","PersonalInfo","state","username","load","email","deviceArray","columns","title","dataIndex","key","render","text","pathname","deviceID","tag","componentDidMount","deleteSuccess","undefined","remove","path","success","post","then","response","data","code","array","map","item","index","deviceName","deviceStatus","isOnline","setState","warning","r","console","log","xxl","xl","lg","md","sm","xs","marginTop"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Descriptions, message} from 'antd';\nimport axios from \"axios\";\nimport cookie from \"react-cookies\";\nimport { Table, Tag } from 'antd';\nimport {Link} from \"react-router-dom\";\n\n\nclass PersonalInfo extends Component {\n\n    state = {username:cookie.load('username'), email:cookie.load('email'), deviceArray:[]}\n    columns = [\n        {\n            title: '设备ID',\n            dataIndex: 'deviceID',\n            key: 'id',\n            render: text => <Link to={{pathname:'/index/editDevice', state:{deviceID:text}}} >{text}</Link>,\n        },\n        {\n            title: '设备名称',\n            dataIndex: 'deviceName',\n            key: 'deviceName',\n        },\n        {\n            title: '设备状态',\n            key: 'deviceStatus',\n            dataIndex: 'deviceStatus',\n            render: tag => <Tag color={tag === 0 ? 'red' : 'green'} key={tag}>{tag === 0 ? '离线' : '在线'}</Tag>\n        }\n    ];\n\n    componentDidMount () {\n        const deleteSuccess = cookie.load('deleteSuccess');\n        if(deleteSuccess !== undefined){\n            cookie.remove('deleteSuccess', {path:'/'});\n            message.success('删除设备成功',2);\n        }\n        axios.post(\"/getPersonalInfo\", {\n            username:this.state.username\n        }).then(response => {\n            const data =  response.data;\n            if(data.code === \"success\"){\n                let array = data.deviceArray.map((item, index) => {\n                    return {\n                        key: index + 1,\n                        deviceName: item.deviceName,\n                        deviceID: item.deviceID,\n                        deviceStatus: item.isOnline\n                    }\n                });\n                this.setState({deviceArray:array});\n\n            }\n            else{\n                message.warning (\"获取个人信息出错\").then (r  => console.log(r));\n            }\n        })\n    }\n\n    render () {\n        const {username, email, deviceArray} = this.state;\n        return (\n            <div>\n                <Descriptions\n                    title=\"个人信息\"\n                    bordered\n                    column={{ xxl: 4, xl: 3, lg: 3, md: 3, sm: 2, xs: 1 }}\n                >\n                    <Descriptions.Item label=\"用户名\">{username}</Descriptions.Item>\n                    <Descriptions.Item label=\"邮箱\">{email}</Descriptions.Item>\n                </Descriptions>\n                <Descriptions\n                    title=\"设备信息\"\n                    bordered\n                    column={{ xxl: 4, xl: 3, lg: 3, md: 3, sm: 2, xs: 1 }}\n                    style={{marginTop:'30px'}}\n                />\n                <Table columns={this.columns} dataSource={deviceArray} />\n            </div>\n        );\n    }\n}\n\nexport default PersonalInfo;\n\n\n\n"]},"metadata":{},"sourceType":"module"}