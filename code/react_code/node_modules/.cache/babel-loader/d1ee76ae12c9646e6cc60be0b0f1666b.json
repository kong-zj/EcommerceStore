{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as textContain from 'zrender/lib/contain/text';\nimport * as graphic from '../../util/graphic';\nimport { enterEmphasis, leaveEmphasis } from '../../util/states';\nimport Model from '../../model/Model';\nimport DataDiffer from '../../data/DataDiffer';\nimport * as listComponentHelper from '../helper/listComponent';\nimport ComponentView from '../../view/Component';\nimport { ToolboxFeature, getFeature } from './featureManager';\nimport { getUID } from '../../util/component';\nimport ZRText from 'zrender/lib/graphic/Text';\n\nvar ToolboxView =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxView, _super);\n\n  function ToolboxView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n\n    if (!toolboxModel.get('show')) {\n      return;\n    }\n\n    var itemSize = +toolboxModel.get('itemSize');\n    var featureOpts = toolboxModel.get('feature') || {};\n    var features = this._features || (this._features = {});\n    var featureNames = [];\n    zrUtil.each(featureOpts, function (opt, name) {\n      featureNames.push(name);\n    });\n    new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(zrUtil.curry(processFeature, null)).execute(); // Keep for diff.\n\n    this._featureNames = featureNames;\n\n    function processFeature(newIndex, oldIndex) {\n      var featureName = featureNames[newIndex];\n      var oldName = featureNames[oldIndex];\n      var featureOpt = featureOpts[featureName];\n      var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n      var feature; // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n\n      if (payload && payload.newTitle != null && payload.featureName === featureName) {\n        featureOpt.title = payload.newTitle;\n      }\n\n      if (featureName && !oldName) {\n        // Create\n        if (isUserFeatureName(featureName)) {\n          feature = {\n            onclick: featureModel.option.onclick,\n            featureName: featureName\n          };\n        } else {\n          var Feature = getFeature(featureName);\n\n          if (!Feature) {\n            return;\n          }\n\n          feature = new Feature();\n        }\n\n        features[featureName] = feature;\n      } else {\n        feature = features[oldName]; // If feature does not exsit.\n\n        if (!feature) {\n          return;\n        }\n      }\n\n      feature.uid = getUID('toolbox-feature');\n      feature.model = featureModel;\n      feature.ecModel = ecModel;\n      feature.api = api;\n\n      if (feature instanceof ToolboxFeature) {\n        if (!featureName && oldName) {\n          feature.dispose && feature.dispose(ecModel, api);\n          return;\n        }\n\n        if (!featureModel.get('show') || feature.unusable) {\n          feature.remove && feature.remove(ecModel, api);\n          return;\n        }\n      }\n\n      createIconPaths(featureModel, feature, featureName);\n\n      featureModel.setIconStatus = function (iconName, status) {\n        var option = this.option;\n        var iconPaths = this.iconPaths;\n        option.iconStatus = option.iconStatus || {};\n        option.iconStatus[iconName] = status;\n\n        if (iconPaths[iconName]) {\n          (status === 'emphasis' ? enterEmphasis : leaveEmphasis)(iconPaths[iconName]);\n        }\n      };\n\n      if (feature instanceof ToolboxFeature) {\n        if (feature.render) {\n          feature.render(featureModel, ecModel, api, payload);\n        }\n      }\n    }\n\n    function createIconPaths(featureModel, feature, featureName) {\n      var iconStyleModel = featureModel.getModel('iconStyle');\n      var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']); // If one feature has mutiple icon. they are orginaized as\n      // {\n      //     icon: {\n      //         foo: '',\n      //         bar: ''\n      //     },\n      //     title: {\n      //         foo: '',\n      //         bar: ''\n      //     }\n      // }\n\n      var icons = feature instanceof ToolboxFeature && feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n      var titles = featureModel.get('title') || {};\n      var iconsMap;\n      var titlesMap;\n\n      if (typeof icons === 'string') {\n        iconsMap = {};\n        iconsMap[featureName] = icons;\n      } else {\n        iconsMap = icons;\n      }\n\n      if (typeof titles === 'string') {\n        titlesMap = {};\n        titlesMap[featureName] = titles;\n      } else {\n        titlesMap = titles;\n      }\n\n      var iconPaths = featureModel.iconPaths = {};\n      zrUtil.each(iconsMap, function (iconStr, iconName) {\n        var path = graphic.createIcon(iconStr, {}, {\n          x: -itemSize / 2,\n          y: -itemSize / 2,\n          width: itemSize,\n          height: itemSize\n        }); // TODO handling image\n\n        path.setStyle(iconStyleModel.getItemStyle());\n        var pathEmphasisState = path.ensureState('emphasis');\n        pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle(); // Text position calculation\n\n        var textContent = new ZRText({\n          style: {\n            text: titlesMap[iconName],\n            align: iconStyleEmphasisModel.get('textAlign'),\n            borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n            padding: iconStyleEmphasisModel.get('textPadding'),\n            fill: null\n          },\n          ignore: true\n        });\n        path.setTextContent(textContent);\n        var tooltipModel = toolboxModel.getModel('tooltip');\n\n        if (tooltipModel && tooltipModel.get('show')) {\n          path.tooltip = zrUtil.extend({\n            content: titlesMap[iconName],\n            formatter: tooltipModel.get('formatter', true) || function () {\n              return titlesMap[iconName];\n            },\n            formatterParams: {\n              componentType: 'toolbox',\n              name: iconName,\n              title: titlesMap[iconName],\n              $vars: ['name', 'title']\n            },\n            position: tooltipModel.get('position', true) || 'bottom'\n          }, tooltipModel.option);\n        } // graphic.enableHoverEmphasis(path);\n\n\n        path.__title = titlesMap[iconName];\n        path.on('mouseover', function () {\n          // Should not reuse above hoverStyle, which might be modified.\n          var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n          var defaultTextPosition = toolboxModel.get('orient') === 'vertical' ? toolboxModel.get('right') == null ? 'right' : 'left' : toolboxModel.get('bottom') == null ? 'bottom' : 'top';\n          textContent.setStyle({\n            fill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || '#000',\n            backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\n          });\n          path.setTextConfig({\n            position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n          });\n          textContent.ignore = !toolboxModel.get('showTitle'); // Use enterEmphasis and leaveEmphasis provide by ec.\n          // There are flags managed by the echarts.\n\n          enterEmphasis(this);\n        }).on('mouseout', function () {\n          if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\n            leaveEmphasis(this);\n          }\n\n          textContent.hide();\n        });\n        (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? enterEmphasis : leaveEmphasis)(path);\n        group.add(path);\n        path.on('click', zrUtil.bind(feature.onclick, feature, ecModel, api, iconName));\n        iconPaths[iconName] = path;\n      });\n    }\n\n    listComponentHelper.layout(group, toolboxModel, api); // Render background after group is layout\n    // FIXME\n\n    group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel)); // Adjust icon title positions to avoid them out of screen\n\n    group.eachChild(function (icon) {\n      var titleText = icon.__title; // const hoverStyle = icon.hoverStyle;\n      // TODO simplify code?\n\n      var emphasisState = icon.ensureState('emphasis');\n      var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\n      var textContent = icon.getTextContent();\n      var emphasisTextState = textContent && textContent.states.emphasis; // May be background element\n\n      if (emphasisTextState && !zrUtil.isFunction(emphasisTextState) && titleText) {\n        var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\n        var rect = textContain.getBoundingRect(titleText, ZRText.makeFont(emphasisTextStyle));\n        var offsetX = icon.x + group.x;\n        var offsetY = icon.y + group.y + itemSize;\n        var needPutOnTop = false;\n\n        if (offsetY + rect.height > api.getHeight()) {\n          emphasisTextConfig.position = 'top';\n          needPutOnTop = true;\n        }\n\n        var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 8;\n\n        if (offsetX + rect.width / 2 > api.getWidth()) {\n          emphasisTextConfig.position = ['100%', topOffset];\n          emphasisTextStyle.align = 'right';\n        } else if (offsetX - rect.width / 2 < 0) {\n          emphasisTextConfig.position = [0, topOffset];\n          emphasisTextStyle.align = 'left';\n        }\n      }\n    });\n  };\n\n  ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n    });\n  }; // updateLayout(toolboxModel, ecModel, api, payload) {\n  //     zrUtil.each(this._features, function (feature) {\n  //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n  //     });\n  // },\n\n\n  ToolboxView.prototype.remove = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.remove && feature.remove(ecModel, api);\n    });\n    this.group.removeAll();\n  };\n\n  ToolboxView.prototype.dispose = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n    });\n  };\n\n  ToolboxView.type = 'toolbox';\n  return ToolboxView;\n}(ComponentView);\n\nfunction isUserFeatureName(featureName) {\n  return featureName.indexOf('my') === 0;\n}\n\nexport default ToolboxView;","map":{"version":3,"sources":["/home/kzj/project/finalize/B-S-/源码/前端/node_modules/echarts/lib/component/toolbox/ToolboxView.js"],"names":["__extends","zrUtil","textContain","graphic","enterEmphasis","leaveEmphasis","Model","DataDiffer","listComponentHelper","ComponentView","ToolboxFeature","getFeature","getUID","ZRText","ToolboxView","_super","apply","arguments","prototype","render","toolboxModel","ecModel","api","payload","group","removeAll","get","itemSize","featureOpts","features","_features","featureNames","each","opt","name","push","_featureNames","add","processFeature","update","remove","curry","execute","newIndex","oldIndex","featureName","oldName","featureOpt","featureModel","feature","newTitle","title","isUserFeatureName","onclick","option","Feature","uid","model","dispose","unusable","createIconPaths","setIconStatus","iconName","status","iconPaths","iconStatus","iconStyleModel","getModel","iconStyleEmphasisModel","icons","getIcons","titles","iconsMap","titlesMap","iconStr","path","createIcon","x","y","width","height","setStyle","getItemStyle","pathEmphasisState","ensureState","style","textContent","text","align","borderRadius","padding","fill","ignore","setTextContent","tooltipModel","tooltip","extend","content","formatter","formatterParams","componentType","$vars","position","__title","on","hoverStyle","defaultTextPosition","stroke","backgroundColor","setTextConfig","hide","bind","layout","makeBackground","getBoundingRect","eachChild","icon","titleText","emphasisState","emphasisTextConfig","textConfig","getTextContent","emphasisTextState","states","emphasis","isFunction","emphasisTextStyle","rect","makeFont","offsetX","offsetY","needPutOnTop","getHeight","topOffset","getWidth","updateView","type","indexOf"],"mappings":"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","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as textContain from 'zrender/lib/contain/text';\nimport * as graphic from '../../util/graphic';\nimport { enterEmphasis, leaveEmphasis } from '../../util/states';\nimport Model from '../../model/Model';\nimport DataDiffer from '../../data/DataDiffer';\nimport * as listComponentHelper from '../helper/listComponent';\nimport ComponentView from '../../view/Component';\nimport { ToolboxFeature, getFeature } from './featureManager';\nimport { getUID } from '../../util/component';\nimport ZRText from 'zrender/lib/graphic/Text';\n\nvar ToolboxView =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxView, _super);\n\n  function ToolboxView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n\n    if (!toolboxModel.get('show')) {\n      return;\n    }\n\n    var itemSize = +toolboxModel.get('itemSize');\n    var featureOpts = toolboxModel.get('feature') || {};\n    var features = this._features || (this._features = {});\n    var featureNames = [];\n    zrUtil.each(featureOpts, function (opt, name) {\n      featureNames.push(name);\n    });\n    new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(zrUtil.curry(processFeature, null)).execute(); // Keep for diff.\n\n    this._featureNames = featureNames;\n\n    function processFeature(newIndex, oldIndex) {\n      var featureName = featureNames[newIndex];\n      var oldName = featureNames[oldIndex];\n      var featureOpt = featureOpts[featureName];\n      var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n      var feature; // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n\n      if (payload && payload.newTitle != null && payload.featureName === featureName) {\n        featureOpt.title = payload.newTitle;\n      }\n\n      if (featureName && !oldName) {\n        // Create\n        if (isUserFeatureName(featureName)) {\n          feature = {\n            onclick: featureModel.option.onclick,\n            featureName: featureName\n          };\n        } else {\n          var Feature = getFeature(featureName);\n\n          if (!Feature) {\n            return;\n          }\n\n          feature = new Feature();\n        }\n\n        features[featureName] = feature;\n      } else {\n        feature = features[oldName]; // If feature does not exsit.\n\n        if (!feature) {\n          return;\n        }\n      }\n\n      feature.uid = getUID('toolbox-feature');\n      feature.model = featureModel;\n      feature.ecModel = ecModel;\n      feature.api = api;\n\n      if (feature instanceof ToolboxFeature) {\n        if (!featureName && oldName) {\n          feature.dispose && feature.dispose(ecModel, api);\n          return;\n        }\n\n        if (!featureModel.get('show') || feature.unusable) {\n          feature.remove && feature.remove(ecModel, api);\n          return;\n        }\n      }\n\n      createIconPaths(featureModel, feature, featureName);\n\n      featureModel.setIconStatus = function (iconName, status) {\n        var option = this.option;\n        var iconPaths = this.iconPaths;\n        option.iconStatus = option.iconStatus || {};\n        option.iconStatus[iconName] = status;\n\n        if (iconPaths[iconName]) {\n          (status === 'emphasis' ? enterEmphasis : leaveEmphasis)(iconPaths[iconName]);\n        }\n      };\n\n      if (feature instanceof ToolboxFeature) {\n        if (feature.render) {\n          feature.render(featureModel, ecModel, api, payload);\n        }\n      }\n    }\n\n    function createIconPaths(featureModel, feature, featureName) {\n      var iconStyleModel = featureModel.getModel('iconStyle');\n      var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']); // If one feature has mutiple icon. they are orginaized as\n      // {\n      //     icon: {\n      //         foo: '',\n      //         bar: ''\n      //     },\n      //     title: {\n      //         foo: '',\n      //         bar: ''\n      //     }\n      // }\n\n      var icons = feature instanceof ToolboxFeature && feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n      var titles = featureModel.get('title') || {};\n      var iconsMap;\n      var titlesMap;\n\n      if (typeof icons === 'string') {\n        iconsMap = {};\n        iconsMap[featureName] = icons;\n      } else {\n        iconsMap = icons;\n      }\n\n      if (typeof titles === 'string') {\n        titlesMap = {};\n        titlesMap[featureName] = titles;\n      } else {\n        titlesMap = titles;\n      }\n\n      var iconPaths = featureModel.iconPaths = {};\n      zrUtil.each(iconsMap, function (iconStr, iconName) {\n        var path = graphic.createIcon(iconStr, {}, {\n          x: -itemSize / 2,\n          y: -itemSize / 2,\n          width: itemSize,\n          height: itemSize\n        }); // TODO handling image\n\n        path.setStyle(iconStyleModel.getItemStyle());\n        var pathEmphasisState = path.ensureState('emphasis');\n        pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle(); // Text position calculation\n\n        var textContent = new ZRText({\n          style: {\n            text: titlesMap[iconName],\n            align: iconStyleEmphasisModel.get('textAlign'),\n            borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n            padding: iconStyleEmphasisModel.get('textPadding'),\n            fill: null\n          },\n          ignore: true\n        });\n        path.setTextContent(textContent);\n        var tooltipModel = toolboxModel.getModel('tooltip');\n\n        if (tooltipModel && tooltipModel.get('show')) {\n          path.tooltip = zrUtil.extend({\n            content: titlesMap[iconName],\n            formatter: tooltipModel.get('formatter', true) || function () {\n              return titlesMap[iconName];\n            },\n            formatterParams: {\n              componentType: 'toolbox',\n              name: iconName,\n              title: titlesMap[iconName],\n              $vars: ['name', 'title']\n            },\n            position: tooltipModel.get('position', true) || 'bottom'\n          }, tooltipModel.option);\n        } // graphic.enableHoverEmphasis(path);\n\n\n        path.__title = titlesMap[iconName];\n        path.on('mouseover', function () {\n          // Should not reuse above hoverStyle, which might be modified.\n          var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n          var defaultTextPosition = toolboxModel.get('orient') === 'vertical' ? toolboxModel.get('right') == null ? 'right' : 'left' : toolboxModel.get('bottom') == null ? 'bottom' : 'top';\n          textContent.setStyle({\n            fill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || '#000',\n            backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\n          });\n          path.setTextConfig({\n            position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n          });\n          textContent.ignore = !toolboxModel.get('showTitle'); // Use enterEmphasis and leaveEmphasis provide by ec.\n          // There are flags managed by the echarts.\n\n          enterEmphasis(this);\n        }).on('mouseout', function () {\n          if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\n            leaveEmphasis(this);\n          }\n\n          textContent.hide();\n        });\n        (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? enterEmphasis : leaveEmphasis)(path);\n        group.add(path);\n        path.on('click', zrUtil.bind(feature.onclick, feature, ecModel, api, iconName));\n        iconPaths[iconName] = path;\n      });\n    }\n\n    listComponentHelper.layout(group, toolboxModel, api); // Render background after group is layout\n    // FIXME\n\n    group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel)); // Adjust icon title positions to avoid them out of screen\n\n    group.eachChild(function (icon) {\n      var titleText = icon.__title; // const hoverStyle = icon.hoverStyle;\n      // TODO simplify code?\n\n      var emphasisState = icon.ensureState('emphasis');\n      var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\n      var textContent = icon.getTextContent();\n      var emphasisTextState = textContent && textContent.states.emphasis; // May be background element\n\n      if (emphasisTextState && !zrUtil.isFunction(emphasisTextState) && titleText) {\n        var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\n        var rect = textContain.getBoundingRect(titleText, ZRText.makeFont(emphasisTextStyle));\n        var offsetX = icon.x + group.x;\n        var offsetY = icon.y + group.y + itemSize;\n        var needPutOnTop = false;\n\n        if (offsetY + rect.height > api.getHeight()) {\n          emphasisTextConfig.position = 'top';\n          needPutOnTop = true;\n        }\n\n        var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 8;\n\n        if (offsetX + rect.width / 2 > api.getWidth()) {\n          emphasisTextConfig.position = ['100%', topOffset];\n          emphasisTextStyle.align = 'right';\n        } else if (offsetX - rect.width / 2 < 0) {\n          emphasisTextConfig.position = [0, topOffset];\n          emphasisTextStyle.align = 'left';\n        }\n      }\n    });\n  };\n\n  ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n    });\n  }; // updateLayout(toolboxModel, ecModel, api, payload) {\n  //     zrUtil.each(this._features, function (feature) {\n  //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n  //     });\n  // },\n\n\n  ToolboxView.prototype.remove = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.remove && feature.remove(ecModel, api);\n    });\n    this.group.removeAll();\n  };\n\n  ToolboxView.prototype.dispose = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n    });\n  };\n\n  ToolboxView.type = 'toolbox';\n  return ToolboxView;\n}(ComponentView);\n\nfunction isUserFeatureName(featureName) {\n  return featureName.indexOf('my') === 0;\n}\n\nexport default ToolboxView;"]},"metadata":{},"sourceType":"module"}